(()=>{"use strict";var e="";const t=e+"c310e08eb3df9dfe7c35.png",r=e+"74c3c0fb802dcfa83abb.jpg",n=e+"83ecd1ca84b74dc9b512.png",o=e+"dec1abec284b6ed45d41.png",i=e+"cc6deb7349d71ca7a583.png",a=e+"bbf66eb7b81dccb49b10.png";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var s=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formElement=t,this.formSelector=r.formSelector,this.inputSelector=r.inputSelector,this.submitButtonSelector=r.submitButtonSelector,this.inactiveButtonClass=r.inactiveButtonClass,this.inputErrorClass=r.inputErrorClass,this.errorClass=r.errorClass,this.buttonElement=this.formElement.querySelector(r.submitButtonSelector),this.inputList=Array.from(this.formElement.querySelectorAll(this.inputSelector))},(t=[{key:"_showInputError",value:function(e,t){this.errorElement=this.formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this.inputErrorClass),this.errorElement.textContent=t,this.errorElement.classList.add(this.errorClass)}},{key:"_hideInputError",value:function(e){this.errorElement=this.formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this.inputErrorClass),this.errorElement.classList.remove(this.errorClass),this.errorElement.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this.buttonElement.classList.add(this.inactiveButtonClass),this.buttonElement.disabled=!0):(this.buttonElement.classList.remove(this.inactiveButtonClass),this.buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetFormValidation",value:function(){var e=this;this.formElement.reset(),this.inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this.formElement.addEventListener("keydown",(function(e){if(console.log(e.key),"Enter"===e.key)return!1})),this._setEventListeners()}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const f=e+"223f012ebd08f3266d8f.png";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var m=function(){return e=function e(t,r,n,o,i,a,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=t,this.link=r,this.template=n,this.handleOpenImage=o,this.handleLike=i,this.cardId=a,this.isLiked=u,this.handleDeleteClick=c},(t=[{key:"_getCardClone",value:function(){return this.card=this.template.cloneNode(!0).content.querySelector(".elements__place"),this._setProperties(),this.cardImage.src=this.link,this.cardTitle.textContent=this.title,this.cardImage.alt=this.title,this.isLiked?this.likeButton.classList.add("elements__box-heart-active"):this.likeButton.classList.remove("elements__box-heart-active"),this.card}},{key:"_setProperties",value:function(){this.cardImage=this.card.querySelector(".elements__place-picture"),this.cardTitle=this.card.querySelector(".elements__box-name"),this.likeButton=this.card.querySelector(".elements__box-heart"),this.deleteButton=this.card.querySelector(".elements__place-delate"),this.deleteButton&&(this.deleteButton.src=f)}},{key:"_handleOpenImageCard",value:function(){this.handleOpenImage(this.title,this.link)}},{key:"_toggleLike",value:function(){var e=this,t=!this.isLiked;this.handleLike(this.cardId,t).then((function(r){e.isLiked=t,e.likeButton.classList.toggle("elements__box-heart-active",e.isLiked),void 0!==r&&(e.card.querySelector(".elements__box-like-counter").textContent=r)})).catch((function(e){console.error("Error al actualizar el estado de like:",e)}))}},{key:"_setEventListeners",value:function(){var e=this;this.deleteButton.addEventListener("click",(function(){console.log("Eliminando tarjeta con ID:",e.cardId),e.handleDeleteClick(e.cardId,e.card)})),this.cardImage.addEventListener("click",(function(){e._handleOpenImageCard()})),this.likeButton.addEventListener("click",(function(){e._toggleLike()}))}},{key:"generateCard",value:function(){return this._getCardClone(),this._setEventListeners(),this.card}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var _=function(){return e=function e(t){var r=t.nameSelector,n=t.aboutSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nameElement=document.querySelector(r),this.aboutElement=document.querySelector(n),this.avatarElement=document.querySelector(o)},(t=[{key:"getUserInfo",value:function(){return{name:this.nameElement.textContent,about:this.aboutElement.textContent,avatar:this.avatarElement?this.avatarElement.src:null}}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about,n=e.avatar;t&&(this.nameElement.textContent=t),r&&(this.aboutElement.textContent=r),n&&this.avatarElement&&(this.avatarElement.src=n)}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),E=document.querySelector("#editForm"),g=E.querySelector("#editName"),S=E.querySelector("#editAbout"),k=document.querySelector("#addSave"),w=document.querySelector(".template"),j=document.querySelector("#addForm"),C=document.querySelector("#profileImage");function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var I=function(){return e=function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=n,this._renderer=o,this.container=document.querySelector(r)},(t=[{key:"setItems",value:function(e){this.items=e}},{key:"renderer",value:function(){var e=this;this.items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this.container.prepend(e)}}])&&P(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function T(e){var t=function(e){if("object"!=B(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}var x=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupElement=document.querySelector(t),this.popupCloseButton=this.popupElement.querySelector(".popup__close-button")||this.popupElement.querySelector(".popup__image-close-button"),this._handleEscClose=this._handleEscClose.bind(this),this.setEventListeners()},t=[{key:"open",value:function(){this.popupElement.classList.add("popup__opened"),k.classList.add("popup__button_disabled"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popupElement.classList.remove("popup__opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_isClickOutside",value:function(e){return e.target.classList.contains("popup__opened")}},{key:"setEventListeners",value:function(){var e=this;this.popupCloseButton.addEventListener("click",(function(){return e.close()})),this.popupElement.querySelector(".popup__container").addEventListener("click",(function(t){t.target.matches(".popup__container")&&e.close()}))}}],t&&q(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function V(e,t,r,n){var o=F(N(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},F.apply(null,arguments)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}var M=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=N(t),function(e,t){if(t&&("object"==R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U()?Reflect.construct(t,r||[],N(e).constructor):t.apply(e,r))}(this,t,[e])).setEventListeners(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(t,e),r=t,(n=[{key:"open",value:function(e,r){V(t,"open",this,3)([]);var n=this.popupElement.querySelector(".popup__image-open"),o=this.popupElement.querySelector(".popup__title");n.src=r,n.alt=e,o.textContent=e}},{key:"close",value:function(){V(t,"close",this,3)([])}}])&&A(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(x);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function H(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function Q(e,t,r,n){var o=W(X(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function W(){return W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},W.apply(null,arguments)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}var Z=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,r){return t=X(t),function(e,t){if(t&&("object"==G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K()?Reflect.construct(t,r||[],X(e).constructor):t.apply(e,r))}(this,t,[e])).handleFormSubmit=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(t,e),r=t,n=[{key:"_getInputValues",value:function(){var e={},t=this.popupElement.querySelector("form");return Array.from(t.elements).forEach((function(t){t.name&&(e[t.name]=t.value)})),e}},{key:"setEventListeners",value:function(){var e=this;Q(t,"setEventListeners",this,3)([]),this.popupElement.querySelector("form").addEventListener("submit",(function(t){t.preventDefault(),e.handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){Q(t,"close",this,3)([]),this.popupElement.querySelector("form").reset()}}],n&&J(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(x);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function te(e){var t=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}var re=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mainUrl=t,this._headers=r},(t=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._mainUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"getCards",value:function(){return fetch("".concat(this._mainUrl,"/cards/"),{method:"GET",headers:this._headers}).then((function(e){if(!e.ok)throw new Error("Error: ".concat(e.status));return e.json()}))}},{key:"updateProfile",value:function(e,t){return fetch("".concat(this._mainUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){if(!e.ok)throw new Error("Error al actualizar los datos: ".concat(e.status));return e.json()}))}},{key:"addCard",value:function(e,t){return fetch("".concat(this._mainUrl,"/cards/"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse).catch((function(e){throw console.error("Error al crear la carta: ".concat(e)),e}))}},{key:"toggleLikeCard",value:function(e,t){var r=t?"PUT":"DELETE";return fetch("".concat(this._mainUrl,"/cards/").concat(e,"/likes/"),{method:r,headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._mainUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse).catch((function(e){throw console.error("Error al eliminar la tarjeta: ".concat(e)),e}))}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._mainUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ie(n.key),n)}}function ie(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}function ue(){return ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ue.apply(null,arguments)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}const se=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=ce(t),function(e,t){if(t&&("object"==ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ae()?Reflect.construct(t,r||[],ce(e).constructor):t.apply(e,r))}(this,t,[e])).submitAction=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(t,e),r=t,n=[{key:"setSubmitAction",value:function(e){this.submitAction=e}},{key:"setEventListeners",value:function(){var e,r,n,o=this;if((e=t,r=this,"function"==typeof(n=ue(ce(1&3?e.prototype:e),"setEventListeners",r))?function(e){return n.apply(r,e)}:n)([]),this.popupElement){var i=this.popupElement.querySelector(".popup__form-save-delete");i?i.addEventListener("click",(function(e){e.preventDefault(),o.submitAction&&o.submitAction()})):console.error("El botón de confirmación no se encuentra en el popup")}else console.error("El popup no se encuentra en el DOM")}}],n&&oe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(x);document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("header");e&&(e.src=t);var u=document.getElementById("profileImage");u&&(u.src=r);var c=document.getElementById("openModal");c&&(c.src=n);var l=document.getElementById("profileEditImg");l&&(l.src=o);var s=document.getElementById("addCloseButton");s&&(s.src=i);var f=document.getElementById("editCloseButton");f&&(f.src=i);var p=document.getElementById("formClose");p&&(p.src=i);var d=document.getElementById("deleteCloseButton");d&&(d.src=i);var y=document.getElementById("vectorProfile");y&&(y.src=a);var m=document.getElementById("addCloseProfilePicture");m&&(m.src=i)}));var fe=new s(E,{formSelector:".popup__form-profile",inputSelector:".popup__input-profile",submitButtonSelector:".popup__form-save-profile",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});fe.enableValidation();var pe=new s(j,{formSelector:".popup__form-add",inputSelector:".popup__input-add",submitButtonSelector:".popup__form-save-add",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});pe.enableValidation();var de=new _({nameSelector:".profile__name",aboutSelector:".profile__description",avatarSelector:"#profileImage"}),ye=(document.querySelector("#editSave"),new Z("#editProfile",(function(e){ge.updateProfile(e.name,e.about).then((function(e){de.setUserInfo({name:e.name,about:e.about})})).catch((function(e){console.error("No se actualizo correctamente el perfil:",e)}))})));document.querySelector(".profile__edit").addEventListener("click",(function(){var e=de.getUserInfo();fe.resetFormValidation(),g.value=e.name,S.value=e.about,ye.open()}));var me=new se("#deleteImage");document.addEventListener("DOMContentLoaded",(function(){me.setEventListeners()}));var he=function(e){return new m(e.name,e.link,w,(function(e,t){return be.open(e,t)}),(function(e,t){return ge.toggleLikeCard(e,t).then((function(e){return e.likes}))}),e._id,e.isLiked,(function(e,t){me.setSubmitAction((function(){ge.deleteCard(e).then((function(){t.remove(),me.close()})).catch((function(e){return console.error("Error al eliminar la tarjeta:",e)}))})),me.open()}))},ve=new Z("#addImage",(function(e){ge.addCard(e.name,e.link).then((function(e){var t=he(e);Se.addItem(t.generateCard())})).catch((function(e){return console.error("Error al agregar tarjeta:",e)}))}));document.querySelector(".profile__add").addEventListener("click",(function(){pe.resetFormValidation(),ve.open()}));var be=new M("#popup__image"),_e=document.querySelector(".popup__image-open");_e.addEventListener("click",(function(){_e.open()}));var Ee=new Z("#addProfilePicture",(function(e){var t=document.getElementById("addSave"),r=e.link;t.textContent="Guardando...",t.disabled=!0,ge.updateAvatar(r).then((function(e){document.getElementById("profileImage").src=e.avatar,Ee.close()})).catch((function(e){console.error("Error al actualizar el avatar:",e),alert("No se pudo actualizar el avatar. Asegúrate de ingresar un enlace válido.")})).finally((function(){t.textContent="Guardar",t.disabled=!1}))}));document.querySelector(".profile__picture-container").addEventListener("click",(function(){pe.resetFormValidation(),Ee.open()}));var ge=new re("https://around-api.es.tripleten-services.com/v1",{authorization:"bb92e92e-c72d-476e-8c84-fd7d16914439","Content-Type":"application/json"}),Se=new I({items:[],renderer:function(e){var t=he(e);Se.addItem(t.generateCard())}},".elements__container-top");Se.renderer();var ke=document.querySelector(".elements__container-top");ge.getCards().then((function(e){console.log("Tarjetas obtenidas del servidor",e),e.forEach((function(e){var t=he(e).generateCard();ke.append(t)}))})).catch((function(e){return console.error("Error al cargar las tarjetas:",e)})),ge.getUserInfo().then((function(e){g.textContent=e.name,S.textContent=e.about,C.src=e.avatar,C.alt="Avatar de ".concat(e.name),de.setUserInfo({name:e.name,about:e.about,avatar:e.avatar}),console.log("ID del usuario:",e._id),console.log("Nombre:",e.name),console.log("About:",e.about),console.log("Avatar:",e.avatar)})).catch((function(e){console.error("Error al cargar la información del usuario:",e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxPQUM5QixJQUNDakIsT0FBTSxTQUFDQyxHQUNON0IsUUFBUThCLE1BQU0sOENBQStDRCxFQUMvRCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL1V0aWwuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3J7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZ3Mpe1xyXG4gICAgICAgIHRoaXMuZm9ybUVsZW1lbnQ9Zm9ybUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5mb3JtU2VsZWN0b3I9c2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuaW5wdXRTZWxlY3Rvcj1zZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uU2VsZWN0b3I9c2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzPXNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVycm9yQ2xhc3M9c2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuZXJyb3JDbGFzcz1zZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uRWxlbWVudD10aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB9XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2Upe1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5lcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpe1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lcnJvckNsYXNzKTtcclxuICAgICAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCl7XHJcbiAgICAgICAgaWYoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCl7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKXtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25FbGVtZW50LmRpc2FibGVkPXRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQ9ZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXNldEZvcm1WYWxpZGF0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCk9PntcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dCk9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldnQua2V5KVxyXG4gICAgICAgICAgICAgICAgaWYoZXZ0LmtleT09PVwiRW50ZXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICAgIH0iLCJpbXBvcnQgdHJhc2hCdXR0b25JY29uIGZyb20gXCIuL2ltYWdlcy9EZWxhdGUtYnV0dG9uLnBuZ1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJke1xyXG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBsaW5rLCB0ZW1wbGF0ZSwgaGFuZGxlT3BlbkltYWdlLCBoYW5kbGVMaWtlLCBjYXJkSWQsIGlzTGlrZWQsaGFuZGxlRGVsZXRlQ2xpY2spIHtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMubGluayA9IGxpbms7XHJcbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICB0aGlzLmhhbmRsZU9wZW5JbWFnZSA9IGhhbmRsZU9wZW5JbWFnZTtcclxuICAgIHRoaXMuaGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XHJcbiAgICB0aGlzLmNhcmRJZCA9IGNhcmRJZDtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7IFxyXG4gICAgdGhpcy5oYW5kbGVEZWxldGVDbGljaz1oYW5kbGVEZWxldGVDbGljaztcclxuICB9XHJcbiAgICBfZ2V0Q2FyZENsb25lKCl7XHJcbiAgICAgICAgdGhpcy5jYXJkPXRoaXMudGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGxhY2VcIik7Ly9jbG9uYSBwcm9waWVkYWRlcyB5IHRvZG9cclxuICAgICAgICB0aGlzLl9zZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICAgICAgdGhpcy5jYXJkSW1hZ2Uuc3JjPXRoaXMubGluaztcclxuICAgICAgICB0aGlzLmNhcmRUaXRsZS50ZXh0Q29udGVudD10aGlzLnRpdGxlO1xyXG4gICAgICAgIHRoaXMuY2FyZEltYWdlLmFsdD10aGlzLnRpdGxlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcclxuICAgICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfX2JveC1oZWFydC1hY3RpdmVcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudHNfX2JveC1oZWFydC1hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmQ7XHJcbiAgICB9XHJcbiAgICBfc2V0UHJvcGVydGllcygpe1xyXG4gICAgICB0aGlzLmNhcmRJbWFnZT10aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGxhY2UtcGljdHVyZVwiKTtcclxuICAgICAgdGhpcy5jYXJkVGl0bGUgPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fYm94LW5hbWVcIik7XHJcbiAgICAgIHRoaXMubGlrZUJ1dHRvbj10aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fYm94LWhlYXJ0XCIpO1xyXG4gICAgICB0aGlzLmRlbGV0ZUJ1dHRvbj10aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGxhY2UtZGVsYXRlXCIpO1xyXG4gICAgICBpZiAodGhpcy5kZWxldGVCdXR0b24pIHtcclxuICAgICAgICB0aGlzLmRlbGV0ZUJ1dHRvbi5zcmMgPSB0cmFzaEJ1dHRvbkljb247XHJcbiAgICB9XHJcbiAgfVxyXG4gICAgX2hhbmRsZU9wZW5JbWFnZUNhcmQoKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlT3BlbkltYWdlKHRoaXMudGl0bGUsIHRoaXMubGluayk7XHJcbiAgfVxyXG4gIF90b2dnbGVMaWtlKCkge1xyXG4gICAgY29uc3QgbmV3TGlrZVN0YXR1cyA9ICF0aGlzLmlzTGlrZWQ7IC8vIENhbWJpYXIgZWwgZXN0YWRvIGxvY2FsIGFudGVzIGRlIGVudmlhciBsYSBzb2xpY2l0dWRcclxuICAgIHRoaXMuaGFuZGxlTGlrZSh0aGlzLmNhcmRJZCwgbmV3TGlrZVN0YXR1cylcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRMaWtlcykgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNMaWtlZCA9IG5ld0xpa2VTdGF0dXM7IC8vIEFjdHVhbGl6YSBlbCBlc3RhZG8gc29sbyBzaSBsYSBBUEkgcmVzcG9uZGUgY29ycmVjdGFtZW50ZVxyXG4gICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2JveC1oZWFydC1hY3RpdmVcIiwgdGhpcy5pc0xpa2VkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGNvbnRhZG9yIGRlIGxpa2VzIHNpIGxhIEFQSSBkZXZ1ZWx2ZSBlbCBuw7ptZXJvIGRlIGxpa2VzXHJcbiAgICAgICAgaWYgKHVwZGF0ZWRMaWtlcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBjb25zdCBsaWtlQ291bnRlciA9IHRoaXMuY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19ib3gtbGlrZS1jb3VudGVyXCIpO1xyXG4gICAgICAgICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB1cGRhdGVkTGlrZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGVzdGFkbyBkZSBsaWtlOlwiLCBlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICAgICAgdGhpcy5kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJFbGltaW5hbmRvIHRhcmpldGEgY29uIElEOlwiLCB0aGlzLmNhcmRJZCk7IFxyXG4gICAgICAgICAgdGhpcy5oYW5kbGVEZWxldGVDbGljayh0aGlzLmNhcmRJZCx0aGlzLmNhcmQpXHJcbiAgICAgICAgICAvL3RoaXMuX2hhbmRsZVJlbW92ZUNhcmQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiAsICgpPT57XHJcbiAgICAgICAgICB0aGlzLl9oYW5kbGVPcGVuSW1hZ2VDYXJkKCk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgICAgIHRoaXMubGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVDYXJkKCl7XHJcbiAgICAgICAgdGhpcy5fZ2V0Q2FyZENsb25lKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYXJkO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIC8vIFNlbGVjY2lvbmFtb3MgbG9zIGVsZW1lbnRvcyBjb24gbG9zIHNlbGVjdG9yZXMgcGFzYWRvcyBlbiBlbCBvYmpldG8gZGVsIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgdGhpcy5uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLmFib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICAvLyBNw6l0b2RvIHBhcmEgb2J0ZW5lciBsYSBpbmZvcm1hY2nDs24gZGVsIHVzdWFyaW8gZGVzZGUgZWwgRE9NXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBhYm91dDogdGhpcy5hYm91dEVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGF2YXRhcjogdGhpcy5hdmF0YXJFbGVtZW50ID8gdGhpcy5hdmF0YXJFbGVtZW50LnNyYyA6IG51bGwsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8vIE3DqXRvZG8gcGFyYSBlc3RhYmxlY2VyIGxhIG51ZXZhIGluZm9ybWFjacOzbiBkZWwgdXN1YXJpbyBlbiBlbCBET01cclxuICAgIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XHJcbiAgICAgICAgaWYgKG5hbWUpIHRoaXMubmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIGlmIChhYm91dCkgdGhpcy5hYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgICAgICBpZiAoYXZhdGFyICYmIHRoaXMuYXZhdGFyRWxlbWVudCkgdGhpcy5hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcclxuICAgICAgfVxyXG59IiwiZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRGb3JtXCIpOyAvL2xvcyBlZGl0IHNvbiBwYXJhIG5vbWJyZSB5IGFjZXJjYSBkZS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dD1mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXROYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgYWJvdXRJbnB1dD1mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRBYm91dFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFNhdmVCdXR0b249ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRTYXZlXCIpO1xyXG5leHBvcnQgY29uc3QgdGVtcGxhdGVDYXJkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVtcGxhdGVcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRGb3JtRWxlbWVudD0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRGb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhcj0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlSW1hZ2VcIik7XHJcblxyXG5leHBvcnR7fVxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbntcclxuICAgIGNvbnN0cnVjdG9yKHtpdGVtcyxyZW5kZXJlcn0sIHNlbGVjdG9yKXsgLy9cclxuICAgICAgICB0aGlzLml0ZW1zPWl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyPXJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgc2V0SXRlbXMoaXRlbXMpIHtcclxuICAgICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcbiAgICAgIH1cclxuICAgIHJlbmRlcmVyKCl7XHJcbiAgICAgICAgLy9yZW5kZXJpemEgY29uIHVuIGl0ZW0gZXNwZWNpYWxcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgIH1cclxuICAgIC8vZWwgaXRlbSBlcyBsYSBjYXJ0YSB5IGVsIHJlbmRlcmVyIGxhIGZ1bmNpb24gZGUgYcOxYWRpciBsYSBjYXJ0YVxyXG4gICAgYWRkSXRlbShlbGVtZW50KXtcclxudGhpcy5jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHthZGRTYXZlQnV0dG9ufSBmcm9tIFwiLi9VdGlsLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwe1xyXG4gICAgY29uc3RydWN0b3IgKHBvcHVwU2VsZWN0b3Ipe1xyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKXx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1jbG9zZS1idXR0b24nKTsgLy9ib3RvbiBkZSBjZXJyYXIgICAgICAgXHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2U9dGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgICBvcGVuKCl7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgICAgYWRkU2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiKVxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCl7XHJcbiAgICAgICAgaWYoZXZ0LmtleT09PSAnRXNjYXBlJyl7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIF9pc0NsaWNrT3V0c2lkZShldnQpe1xyXG4gICAgICAgIHJldHVybiBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICAvL0V2ZW50b3MgZGUgdG9kb1xyXG4gICAgICAgIHRoaXMucG9wdXBDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwiLnBvcHVwX19jb250YWluZXJcIikpe1xyXG4gICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbi8vIHNvbG8gcXVlIGFicmFuIGxhcyBpbWFnZW5lc1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwe1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vYXF1aSBkZWNpbW9zIHF1ZSBlcyBsYSBkZWwgcGFkcmUgXHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG4gICAgb3Blbih0aXRsZSwgbGluayl7XHJcbiAgICBzdXBlci5vcGVuKCk7IC8vdmFtb3MgYSBtb2RpZmljYXIgbGEgZGVsIHBhZHJlXHJcbiAgICAgICAgY29uc3QgcG9wdXBPcGVuZWRJbWFnZSA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2Utb3BlbicpO1xyXG4gICAgICAgIGNvbnN0IHBvcHVwVGl0bGUgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlJyk7XHJcbiAgICAgICAgcG9wdXBPcGVuZWRJbWFnZS5zcmM9bGluaztcclxuICAgICAgICBwb3B1cE9wZW5lZEltYWdlLmFsdD10aXRsZTtcclxuICAgICAgICBwb3B1cFRpdGxlLnRleHRDb250ZW50PXRpdGxlOyAgIFxyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTsgXHJcbiAgICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cHtcclxuICAgIGNvbnN0cnVjdG9yIChwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0ICl7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vbGxhbWEgYWwgY29uc3RydWN0b3IgcGFkcmUgeSBsZSBtYW5kYSBlbCBzZWxlY3RvciwgZWwgcGFkcmUgZXN0YSBlbiBwb3AgdXBcclxuICAgICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQ9aGFuZGxlRm9ybVN1Ym1pdDsgLy9sYSBndWFyZG8gICAgICAgIFxyXG4gICAgfVxyXG4gICAgLy9BcXVpIHZveSBhIHJlY29nZXIgdmFsb3JlcyB5IGd1YXJkYXJsb3MgZW4gdW4gb2JqZXRvIFxyXG4gICAgX2dldElucHV0VmFsdWVzKCl7IFxyXG4gICAgICAgIGNvbnN0IGZvcm1WYWx1ZXM9e307XHJcbiAgICAgICAgY29uc3QgZm9ybUVsZW1lbnQ9dGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XHJcbiAgICAgICAgQXJyYXkuZnJvbShmb3JtRWxlbWVudC5lbGVtZW50cykuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2coaW5wdXQpXHJcbiAgICAgICAgICAgIGlmKGlucHV0Lm5hbWUpe1xyXG4gICAgICAgICAgICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXT1pbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgLy9jb25zb2xlLmxvZyhmb3JtVmFsdWVzKTtcclxuICAgICAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICAgIH1cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy9zdXBlciBzb2xvIHBhcmEgbWV0b2RvcyB5IHNlIHZhIGFsIGRlbCBwYWRyZVxyXG4gICAgICAgIGNvbnN0IGZvcm1FbGVtZW50PXRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG4gICAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCk9PnsgLy90aGlzLnBvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KT0+e1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpIFxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7ICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICBjb25zdCBmb3JtRWxlbWVudD10aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcclxuICAgICAgICBmb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihtYWluVXJsLCBoZWFkZXJzKSB7XHJcbiAgICAgIHRoaXMuX21haW5VcmwgPSBtYWluVXJsO1xyXG4gICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuICBcclxuICAgIC8vIFZlcmlmaWNhciBsYSByZXNwdWVzdGEgZGVsIHNlcnZpZG9yXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICBcclxuICAgIC8vIEluZm9ybWFjacOzbiBkZWwgdXN1YXJpb1xyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9tYWluVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIC8vb2J0ZW5lciBsYXMgY2FydGFzXHJcbiAgICBnZXRDYXJkcygpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX21haW5Vcmx9L2NhcmRzL2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2ZpbGUobmFtZSxhYm91dCl7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9tYWluVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgICB9KSxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGFsIGFjdHVhbGl6YXIgbG9zIGRhdG9zOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGFkZENhcmQobmFtZSwgbGluaykge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbWFpblVybH0vY2FyZHMvYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsIFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbmFtZTogbmFtZSwgXHJcbiAgICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnRhOiAke2Vycn1gKTtcclxuICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHRvZ2dsZUxpa2VDYXJkKGNhcmRJZCwgaXNMaWtlZCkge1xyXG4gICAgICBjb25zdCBtZXRob2QgPSBpc0xpa2VkID8gJ1BVVCcgOiAnREVMRVRFJzsgLy8gUFVUIHNpIGVzIHVuIFwibGlrZVwiLCBERUxFVEUgc2kgZXMgdW4gXCJ1bmxpa2VcIlxyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbWFpblVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzL2AsIHtcclxuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX21haW5Vcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsIC8vIFVzYW1vcyBERUxFVEUgcGFyYSBlbGltaW5hciBsYSB0YXJqZXRhXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBlbGltaW5hciBsYSB0YXJqZXRhOiAke2Vycn1gKTtcclxuICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUF2YXRhcihhdmF0YXJVcmwpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX21haW5Vcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBhdmF0YXJVcmwgfSksXHJcbiAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuc3VibWl0QWN0aW9uID0gbnVsbDsgLy8gQWNjacOzbiBwZXJzb25hbGl6YWRhIHF1ZSBzZSBlamVjdXRhIGFsIGNvbmZpcm1hclxyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5zdWJtaXRBY3Rpb24gPSBhY3Rpb247IC8vIFBlcm1pdGUgY29uZmlndXJhciBsYSBhY2Npw7NuIGEgZWplY3V0YXJcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gTGxhbWEgYSBsb3MgZXZlbnRvcyBiYXNlIGRlIGxhIGNsYXNlIFBvcHVwXHJcbiAgICBpZiAoIXRoaXMucG9wdXBFbGVtZW50KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbCBwb3B1cCBubyBzZSBlbmN1ZW50cmEgZW4gZWwgRE9NXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLXNhdmUtZGVsZXRlJyk7XHJcbiAgICBpZiAoZGVsZXRlQnV0dG9uKSB7XHJcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3VibWl0QWN0aW9uKSB7XHJcbiAgICAgICAgICB0aGlzLnN1Ym1pdEFjdGlvbigpOyAvLyBFamVjdXRhIGxhIGFjY2nDs24gY29uZmlndXJhZGFcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVsIGJvdMOzbiBkZSBjb25maXJtYWNpw7NuIG5vIHNlIGVuY3VlbnRyYSBlbiBlbCBwb3B1cFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aENvbmZpcm1hdGlvbjsiLCJpbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIlxyXG5pbXBvcnQgaGVhZGVyIGZyb20gXCIuL2ltYWdlcy9IZWFkZXIucG5nXCIgO1xyXG5pbXBvcnQgcHJvZmlsZVBpY3R1cmUgZnJvbSBcIi4vaW1hZ2VzL1Byb2ZpbGUuanBnXCI7XHJcbmltcG9ydCBwcm9maWxlRWRpdCBmcm9tIFwiLi9pbWFnZXMvRWRpdF9idXR0b24ucG5nXCI7XHJcbmltcG9ydCBwcm9maWxlQWRkIGZyb20gXCIuL2ltYWdlcy9BZGQucG5nXCI7XHJcbmltcG9ydCBlZGl0Q2xvc2UgZnJvbSBcIi4vaW1hZ2VzL0Nsb3NlLUljb24ucG5nXCI7XHJcbmltcG9ydCBjbG9zZUZvcm0gZnJvbSBcIi4vaW1hZ2VzL0Nsb3NlLUljb24ucG5nXCI7XHJcbmltcG9ydCBjbG9zZURlbGV0ZSBmcm9tIFwiLi9pbWFnZXMvQ2xvc2UtSWNvbi5wbmdcIjtcclxuaW1wb3J0IGFkZENsb3NlQnV0dG9uSW1nIGZyb20gXCIuL2ltYWdlcy9DbG9zZS1JY29uLnBuZ1wiO1xyXG5pbXBvcnQgYWRkQ2xvc2VCdXR0b25QaWN0dXJlIGZyb20gXCIuL2ltYWdlcy9DbG9zZS1JY29uLnBuZ1wiO1xyXG5pbXBvcnQgdmVjdG9ySW1nIGZyb20gXCIuL2ltYWdlcy92ZWN0b3IucG5nXCI7XHJcbmltcG9ydCAgRm9ybVZhbGlkYXRvciAgZnJvbSBcIi4vRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQge3RlbXBsYXRlQ2FyZCwgYWRkRm9ybUVsZW1lbnQsZm9ybUVsZW1lbnQsbmFtZUlucHV0LGFib3V0SW5wdXQscHJvZmlsZUF2YXRhcn0gZnJvbSBcIi4vVXRpbC5qc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4vU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgIFBvcHVwV2l0aEltYWdlICBmcm9tIFwiLi9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3QgaGVhZGVySW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJcIik7XHJcbiAgaWYgKGhlYWRlckltZykgaGVhZGVySW1nLnNyYyA9IGhlYWRlcjtcclxuXHJcbiAgY29uc3QgcHJvZmlsZVBpY3R1cmVJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVJbWFnZVwiKTtcclxuICBpZiAocHJvZmlsZVBpY3R1cmVJbWcpIHByb2ZpbGVQaWN0dXJlSW1nLnNyYyA9IHByb2ZpbGVQaWN0dXJlO1xyXG5cclxuICBjb25zdCBwcm9maWxlRWRpdEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3Blbk1vZGFsXCIpO1xyXG4gIGlmIChwcm9maWxlRWRpdEltZykgcHJvZmlsZUVkaXRJbWcuc3JjID0gcHJvZmlsZUVkaXQ7XHJcblxyXG4gIGNvbnN0IHByb2ZpbGVBZGRJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVFZGl0SW1nXCIpO1xyXG4gIGlmIChwcm9maWxlQWRkSW1nKSBwcm9maWxlQWRkSW1nLnNyYyA9IHByb2ZpbGVBZGQ7XHJcbiAgY29uc3QgYWRkQ2xvc2VCdXR0b25JbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkQ2xvc2VCdXR0b25cIik7XHJcbiAgaWYgKGFkZENsb3NlQnV0dG9uSW1hZ2UpIGFkZENsb3NlQnV0dG9uSW1hZ2Uuc3JjID0gYWRkQ2xvc2VCdXR0b25JbWc7XHJcblxyXG4gIGNvbnN0IHByb2ZpbGVFZGl0Q2xvc2VJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRDbG9zZUJ1dHRvblwiKTtcclxuICBpZiAocHJvZmlsZUVkaXRDbG9zZUltZykgcHJvZmlsZUVkaXRDbG9zZUltZy5zcmMgPSBlZGl0Q2xvc2U7XHJcblxyXG4gIGNvbnN0IGNsb3NlRm9ybUltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9ybUNsb3NlXCIpO1xyXG4gIGlmIChjbG9zZUZvcm1JbWcpIGNsb3NlRm9ybUltZy5zcmMgPSBjbG9zZUZvcm07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUltYWdlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGVDbG9zZUJ1dHRvblwiKTtcclxuICBpZiAoZGVsZXRlSW1hZ2VCdXR0b24pIGRlbGV0ZUltYWdlQnV0dG9uLnNyYyA9IGNsb3NlRGVsZXRlO1xyXG5cclxuICBjb25zdCB2ZWN0b3JJbWFnZUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZlY3RvclByb2ZpbGVcIik7XHJcbiAgaWYgKHZlY3RvckltYWdlSWNvbikgdmVjdG9ySW1hZ2VJY29uLnNyYyA9IHZlY3RvckltZztcclxuXHJcbiAgY29uc3QgY2xvc2VQcm9maWxlUGljdHVyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkQ2xvc2VQcm9maWxlUGljdHVyZVwiKTtcclxuICBpZiAoY2xvc2VQcm9maWxlUGljdHVyZSkgY2xvc2VQcm9maWxlUGljdHVyZS5zcmMgPSBhZGRDbG9zZUJ1dHRvblBpY3R1cmU7XHJcbn0pO1xyXG5cclxuLy9sbyBkZSBhcXVpIGVzIHBhcmEgbGEgdmFsaWRhY2lvblxyXG5jb25zdCBzZXR0aW5ncz17XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1wcm9maWxlXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXQtcHJvZmlsZVwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLXNhdmUtcHJvZmlsZVwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxyXG59XHJcbmNvbnN0IHNldHRpbmdzQWRkPXtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWFkZFwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0LWFkZFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLXNhdmUtYWRkXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiXHJcbn1cclxuXHJcbi8vQXF1aSB2YSBsbyBkZSBsYSB2YWxpZGFjaW9uLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCB2YWxpZGF0ZVByb2ZpbGVGb3JtPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpO1xyXG52YWxpZGF0ZVByb2ZpbGVGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgdmFsaWRhdGVBZGRGb3JtPSBuZXcgRm9ybVZhbGlkYXRvcihhZGRGb3JtRWxlbWVudCwgc2V0dGluZ3NBZGQpO1xyXG52YWxpZGF0ZUFkZEZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vL0luc3RhbmNpYW1vcyB1c2VyaW5mb1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcclxuICBhYm91dFNlbGVjdG9yOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyxcclxuICBhdmF0YXJTZWxlY3RvcjogJyNwcm9maWxlSW1hZ2UnLCAvLyBTZWxlY3RvciBwYXJhIGxhIGltYWdlbiBkZSBwZXJmaWxcclxufSk7XHJcbiAvL0FxdWkgZXMgcGFyYSBlZGl0YXIgcGVyZmlsLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gY29uc3Qgc2F2ZUJ1dHRvbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRTYXZlXCIpO1xyXG4gY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjZWRpdFByb2ZpbGUnLCAodmFsdWVzKSA9PiB7IC8vY2FtYmllIGVzdG8gcGFyYSBpbmNvcnBvcmFyICBhcGlcclxuICBhcGkudXBkYXRlUHJvZmlsZSh2YWx1ZXMubmFtZSwgdmFsdWVzLmFib3V0KVxyXG4udGhlbigodXBkYXRlRGF0YSkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgIG5hbWU6IHVwZGF0ZURhdGEubmFtZSxcclxuICAgIGFib3V0OiB1cGRhdGVEYXRhLmFib3V0XHJcbiAgfSk7XHJcbn0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBhY3R1YWxpem8gY29ycmVjdGFtZW50ZSBlbCBwZXJmaWw6XCIsIGVycik7XHJcbiAgfSk7XHJcbn0pXHJcbmNvbnN0IG9wZW5Nb2RhbEJ1dHRvblByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRcIik7XHJcbm9wZW5Nb2RhbEJ1dHRvblByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXHJcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICB2YWxpZGF0ZVByb2ZpbGVGb3JtLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcclxuICBhYm91dElucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmFib3V0O1xyXG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xyXG59KTtcclxuLy9BcXVpIGVzIHBhcmEgZWwgcG9wdXAgZGUgYWdyZWdhciB0YXJqZXRhLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbignI2RlbGV0ZUltYWdlJyk7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcbiAgcG9wdXBEZWxldGVDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxufSk7XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcclxuICByZXR1cm4gbmV3IENhcmQoXHJcbiAgICBpdGVtLm5hbWUsXHJcbiAgICBpdGVtLmxpbmssXHJcbiAgICB0ZW1wbGF0ZUNhcmQsXHJcbiAgICAodGl0bGUsIGxpbmspID0+IHBvcHVwV2l0aEltYWdlLm9wZW4odGl0bGUsIGxpbmspLFxyXG4gICAgKGNhcmRJZCwgaXNMaWtlZCkgPT4ge1xyXG4gICAgICByZXR1cm4gYXBpLnRvZ2dsZUxpa2VDYXJkKGNhcmRJZCwgaXNMaWtlZClcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgLy8gU3Vwb25nYW1vcyBxdWUgbGEgQVBJIGRldnVlbHZlIGVsIG7Dum1lcm8gdG90YWwgZGUgbGlrZXMgZW4gYGRhdGEubGlrZXNgXHJcbiAgICAgICAgICByZXR1cm4gZGF0YS5saWtlczsgLy8gQ2FtYmlhciBzZWfDum4gZWwgZm9ybWF0byBleGFjdG8gZGUgbGEgcmVzcHVlc3RhIGRlIGxhIEFQSVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGl0ZW0uX2lkLFxyXG4gICAgaXRlbS5pc0xpa2VkLFxyXG4gICAgKGNhcmRJZCwgY2FyZEVsZW1lbnQpID0+IHtcclxuICAgICAgcG9wdXBEZWxldGVDb25maXJtYXRpb24uc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpIC8vIEVsaW1pbmFyIGxhIHRhcmpldGEgZGUgbGEgQVBJXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpOyAvLyBFbGltaW5hciBkZWwgRE9NXHJcbiAgICAgICAgICAgIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBlbGltaW5hciBsYSB0YXJqZXRhOlwiLCBlcnIpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLm9wZW4oKTsgLy8gQWJyZSBlbCBtb2RhbCBkZSBjb25maXJtYWNpw7NuXHJcbiAgICB9XHJcbiAgKTtcclxufTtcclxuY29uc3QgcG9wdXBDYXJkcyA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjYWRkSW1hZ2UnLCAodmFsdWVzKSA9PiB7XHJcbiAgYXBpLmFkZENhcmQodmFsdWVzLm5hbWUsIHZhbHVlcy5saW5rKVxyXG4gICAgLnRoZW4oKG51ZXZhQ2FyZCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChudWV2YUNhcmQpO1xyXG4gICAgICBzZWN0aW9uQ2FyZHMuYWRkSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFncmVnYXIgdGFyamV0YTpcIiwgZXJyKSk7XHJcbn0pO1xyXG5cclxuY29uc3Qgb3Blbk1vZGFsQnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGRcIik7XHJcbm9wZW5Nb2RhbEJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHZhbGlkYXRlQWRkRm9ybS5yZXNldEZvcm1WYWxpZGF0aW9uKCk7XHJcbiAgcG9wdXBDYXJkcy5vcGVuKCk7XHJcbn0pO1xyXG4vL0FxdWkgdmEgbGEgZGUgYWJyaXIgaW1hZ2VuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI3BvcHVwX19pbWFnZScpOyBcclxuY29uc3Qgb3BlbkltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2Utb3BlblwiKTtcclxub3BlbkltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3BlbkltYWdlLm9wZW4oKTtcclxufSk7XHJcbi8vQXF1aSB2YSBsbyBkZSBsYSBpbWFnZW4gZGVsIHBlcmZpbC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IGF2YXRhckZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnI2FkZFByb2ZpbGVQaWN0dXJlJywgKGZvcm1EYXRhKSA9PiB7XHJcbiAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkU2F2ZVwiKTsgLy8gQm90w7NuIGRlIGd1YXJkYXJcclxuICBjb25zdCBhdmF0YXJVcmwgPSBmb3JtRGF0YS5saW5rOyAvLyBPYnTDqW4gZWwgZW5sYWNlIGluZ3Jlc2FkbyBlbiBlbCBmb3JtdWxhcmlvXHJcblxyXG4gIC8vIENhbWJpYXIgZWwgdGV4dG8gZGVsIGJvdMOzbiBhIFwiR3VhcmRhbmRvLi4uXCJcclxuICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcclxuICBzYXZlQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgYXBpLnVwZGF0ZUF2YXRhcihhdmF0YXJVcmwpXHJcbiAgICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgICAgLy8gQWN0dWFsaXphIGVsIGF2YXRhciBlbiBlbCBET01cclxuICAgICAgY29uc3QgcHJvZmlsZVBpY3R1cmVJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVJbWFnZVwiKTtcclxuICAgICAgcHJvZmlsZVBpY3R1cmVJbWcuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xyXG5cclxuICAgICAgYXZhdGFyRm9ybS5jbG9zZSgpOyAvLyBDaWVycmEgZWwgbW9kYWwgc2kgbGEgYWN0dWFsaXphY2nDs24gZnVlIGV4aXRvc2FcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBhdmF0YXI6XCIsIGVycik7XHJcbiAgICAgIGFsZXJ0KFwiTm8gc2UgcHVkbyBhY3R1YWxpemFyIGVsIGF2YXRhci4gQXNlZ8O6cmF0ZSBkZSBpbmdyZXNhciB1biBlbmxhY2UgdsOhbGlkby5cIik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAvLyBSZXN0YXVyYSBlbCB0ZXh0byBkZWwgYm90w7NuIGEgXCJHdWFyZGFyXCIgeSBoYWJpbMOtdGFsb1xyXG4gICAgICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFyXCI7XHJcbiAgICAgIHNhdmVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0pO1xyXG59KTtcclxuY29uc3Qgb3Blbk1vZGFsUGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGljdHVyZS1jb250YWluZXJcIik7XHJcbm9wZW5Nb2RhbFBpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB2YWxpZGF0ZUFkZEZvcm0ucmVzZXRGb3JtVmFsaWRhdGlvbigpOyAvLyBSZXNldGVhIHZhbGlkYWNpb25lcywgc2kgZXMgbmVjZXNhcmlvXHJcbiAgYXZhdGFyRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG4vL2xsYW1hbW9zIGEgbGEgYXBpXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoXCJodHRwczovL2Fyb3VuZC1hcGkuZXMudHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLCB7XHJcbiAgYXV0aG9yaXphdGlvbjogXCJiYjkyZTkyZS1jNzJkLTQ3NmUtOGM4NC1mZDdkMTY5MTQ0MzlcIixcclxuICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxufSk7XHJcbi8vIEluc3RhbmNpYW1vcyBsYSBjbGFzZSBTZWN0aW9uLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3Qgc2VjdGlvbkNhcmRzID0gbmV3IFNlY3Rpb24oe1xyXG4gIGl0ZW1zOiBbXSwgLy9pbmljaWFsbWVudGUgZXMgdW4gYXJyYXkgdmFjw61vXHJcbiAgcmVuZGVyZXI6IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pOyAvLyBVc2EgbGEgZnVuY2nDs24gY2VudHJhbGl6YWRhXHJcbiAgICBzZWN0aW9uQ2FyZHMuYWRkSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcclxuICB9XHJcbn0sIFwiLmVsZW1lbnRzX19jb250YWluZXItdG9wXCIpO1xyXG5zZWN0aW9uQ2FyZHMucmVuZGVyZXIoKTtcclxuLy9BcGktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQXBpIHBhcmEgY2FyZ2FyIGxhcyB0YXJqZXRhc1xyXG4gY29uc3QgY2FyZHNDb250YWluZXI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY29udGFpbmVyLXRvcFwiKTtcclxuIGFwaS5nZXRDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlRhcmpldGFzIG9idGVuaWRhcyBkZWwgc2Vydmlkb3JcIiwgY2FyZHMpO1xyXG4gICAgY2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSkuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgIGNhcmRzQ29udGFpbmVyLmFwcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FyZ2FyIGxhcyB0YXJqZXRhczpcIiwgZXJyKSk7XHJcblxyXG4gIGFwaS5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgIC8vIEFzaWduYXIgbG9zIGRhdG9zIGFsIERPTVxyXG4gICAgbmFtZUlucHV0LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgYWJvdXRJbnB1dC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XHJcbiAgICBwcm9maWxlQXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyO1xyXG4gICAgcHJvZmlsZUF2YXRhci5hbHQgPSBgQXZhdGFyIGRlICR7ZGF0YS5uYW1lfWA7XHJcblxyXG4gICAgLy8gQWN0dWFsaXphciBsYSBpbnN0YW5jaWEgZGUgVXNlckluZm9cclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICBhYm91dDogZGF0YS5hYm91dCxcclxuICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiSUQgZGVsIHVzdWFyaW86XCIsIGRhdGEuX2lkKTtcclxuICAgIGNvbnNvbGUubG9nKFwiTm9tYnJlOlwiLCBkYXRhLm5hbWUpO1xyXG4gICAgY29uc29sZS5sb2coXCJBYm91dDpcIiwgZGF0YS5hYm91dCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkF2YXRhcjpcIiwgZGF0YS5hdmF0YXIpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYXJnYXIgbGEgaW5mb3JtYWNpw7NuIGRlbCB1c3VhcmlvOlwiLCBlcnIpO1xyXG4gIH0pO1xyXG4gIFxyXG5cclxuIFxyXG4gIFxyXG5cclxuIFxyXG5cclxuXHJcbiAgXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJzZXR0aW5ncyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImJ1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImtleSIsInZhbHVlIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfdGhpcyIsImZvckVhY2giLCJlbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfdGhpczIiLCJyZXNldCIsImV2dCIsImNvbnNvbGUiLCJsb2ciLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwidGl0bGUiLCJsaW5rIiwidGVtcGxhdGUiLCJoYW5kbGVPcGVuSW1hZ2UiLCJoYW5kbGVMaWtlIiwiY2FyZElkIiwiaXNMaWtlZCIsImhhbmRsZURlbGV0ZUNsaWNrIiwiY2FyZCIsImNsb25lTm9kZSIsImNvbnRlbnQiLCJfc2V0UHJvcGVydGllcyIsImNhcmRJbWFnZSIsInNyYyIsImNhcmRUaXRsZSIsImFsdCIsImxpa2VCdXR0b24iLCJkZWxldGVCdXR0b24iLCJ0cmFzaEJ1dHRvbkljb24iLCJuZXdMaWtlU3RhdHVzIiwidGhlbiIsInVwZGF0ZWRMaWtlcyIsInRvZ2dsZSIsInVuZGVmaW5lZCIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJfaGFuZGxlT3BlbkltYWdlQ2FyZCIsIl90b2dnbGVMaWtlIiwiX2dldENhcmRDbG9uZSIsIlVzZXJJbmZvIiwiX3JlZiIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIm5hbWVFbGVtZW50IiwiZG9jdW1lbnQiLCJhYm91dEVsZW1lbnQiLCJhdmF0YXJFbGVtZW50IiwibmFtZSIsImFib3V0IiwiYXZhdGFyIiwiX3JlZjIiLCJuYW1lSW5wdXQiLCJhYm91dElucHV0IiwiYWRkU2F2ZUJ1dHRvbiIsInRlbXBsYXRlQ2FyZCIsImFkZEZvcm1FbGVtZW50IiwicHJvZmlsZUF2YXRhciIsIlNlY3Rpb24iLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJjb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsInBvcHVwRWxlbWVudCIsInBvcHVwQ2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiZSIsIm1hdGNoZXMiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9jYWxsU3VwZXIiLCJfaW5oZXJpdHMiLCJfc3VwZXJQcm9wR2V0IiwicG9wdXBPcGVuZWRJbWFnZSIsInBvcHVwVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsImZvcm1WYWx1ZXMiLCJlbGVtZW50cyIsImlucHV0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJBcGkiLCJtYWluVXJsIiwiaGVhZGVycyIsIl9tYWluVXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJfY2hlY2tSZXNwb25zZSIsIkVycm9yIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXJVcmwiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJzdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJldmVudCIsImhlYWRlckltZyIsImdldEVsZW1lbnRCeUlkIiwiaGVhZGVyIiwicHJvZmlsZVBpY3R1cmVJbWciLCJwcm9maWxlUGljdHVyZSIsInByb2ZpbGVFZGl0SW1nIiwicHJvZmlsZUVkaXQiLCJwcm9maWxlQWRkSW1nIiwicHJvZmlsZUFkZCIsImFkZENsb3NlQnV0dG9uSW1hZ2UiLCJhZGRDbG9zZUJ1dHRvbkltZyIsInByb2ZpbGVFZGl0Q2xvc2VJbWciLCJlZGl0Q2xvc2UiLCJjbG9zZUZvcm1JbWciLCJjbG9zZUZvcm0iLCJkZWxldGVJbWFnZUJ1dHRvbiIsImNsb3NlRGVsZXRlIiwidmVjdG9ySW1hZ2VJY29uIiwidmVjdG9ySW1nIiwiY2xvc2VQcm9maWxlUGljdHVyZSIsImFkZENsb3NlQnV0dG9uUGljdHVyZSIsInZhbGlkYXRlUHJvZmlsZUZvcm0iLCJlbmFibGVWYWxpZGF0aW9uIiwidmFsaWRhdGVBZGRGb3JtIiwidXNlckluZm8iLCJwb3B1cEVkaXRQcm9maWxlIiwidmFsdWVzIiwiYXBpIiwidXBkYXRlUHJvZmlsZSIsInVwZGF0ZURhdGEiLCJzZXRVc2VySW5mbyIsImN1cnJlbnRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwicmVzZXRGb3JtVmFsaWRhdGlvbiIsIm9wZW4iLCJwb3B1cERlbGV0ZUNvbmZpcm1hdGlvbiIsImNyZWF0ZUNhcmQiLCJwb3B1cFdpdGhJbWFnZSIsInRvZ2dsZUxpa2VDYXJkIiwiZGF0YSIsImxpa2VzIiwiX2lkIiwiY2FyZEVsZW1lbnQiLCJzZXRTdWJtaXRBY3Rpb24iLCJkZWxldGVDYXJkIiwicG9wdXBDYXJkcyIsImFkZENhcmQiLCJudWV2YUNhcmQiLCJzZWN0aW9uQ2FyZHMiLCJhZGRJdGVtIiwiZ2VuZXJhdGVDYXJkIiwib3BlbkltYWdlIiwiYXZhdGFyRm9ybSIsImZvcm1EYXRhIiwic2F2ZUJ1dHRvbiIsInVwZGF0ZUF2YXRhciIsInVzZXJEYXRhIiwiYWxlcnQiLCJmaW5hbGx5IiwiYXV0aG9yaXphdGlvbiIsImNhcmRzQ29udGFpbmVyIiwiZ2V0Q2FyZHMiLCJjYXJkcyIsImFwcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=