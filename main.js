(()=>{"use strict";var e="";const t=e+"c310e08eb3df9dfe7c35.png",n=e+"74c3c0fb802dcfa83abb.jpg",r=e+"83ecd1ca84b74dc9b512.png",o=e+"dec1abec284b6ed45d41.png",i=e+"cc6deb7349d71ca7a583.png",a=e+"bbf66eb7b81dccb49b10.png";function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var s=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formElement=t,this.formSelector=n.formSelector,this.inputSelector=n.inputSelector,this.submitButtonSelector=n.submitButtonSelector,this.inactiveButtonClass=n.inactiveButtonClass,this.inputErrorClass=n.inputErrorClass,this.errorClass=n.errorClass,this.buttonElement=this.formElement.querySelector(n.submitButtonSelector),this.inputList=Array.from(this.formElement.querySelectorAll(this.inputSelector))},(t=[{key:"_showInputError",value:function(e,t){this.errorElement=this.formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this.inputErrorClass),this.errorElement.textContent=t,this.errorElement.classList.add(this.errorClass)}},{key:"_hideInputError",value:function(e){this.errorElement=this.formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this.inputErrorClass),this.errorElement.classList.remove(this.errorClass),this.errorElement.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this.buttonElement.classList.add(this.inactiveButtonClass),this.buttonElement.disabled=!0):(this.buttonElement.classList.remove(this.inactiveButtonClass),this.buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetFormValidation",value:function(){var e=this;this.formElement.reset(),this.inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this.formElement.addEventListener("keydown",(function(e){if(console.log(e.key),"Enter"===e.key)return!1})),this._setEventListeners()}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const f=e+"223f012ebd08f3266d8f.png";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var m=function(){return e=function e(t,n,r,o,i,a,c,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=t,this.link=n,this.template=r,this.handleOpenImage=o,this.handleLike=i,this.cardId=a,this.isLiked=c,this.handleDeleteClick=u},t=[{key:"_getCardClone",value:function(){return this.card=this.template.cloneNode(!0).content.querySelector(".elements__place"),this._setProperties(),this.cardImage.src=this.link,this.cardTitle.textContent=this.title,this.cardImage.alt=this.title,this.isLiked?this.likeButton.classList.add("elements__box-heart-active"):this.likeButton.classList.remove("elements__box-heart-active"),this.card}},{key:"_setProperties",value:function(){this.cardImage=this.card.querySelector(".elements__place-picture"),this.cardTitle=this.card.querySelector(".elements__box-name"),this.likeButton=this.card.querySelector(".elements__box-heart"),this.deleteButton=this.card.querySelector(".elements__place-delate"),this.deleteButton&&(this.deleteButton.src=f)}},{key:"_handleOpenImageCard",value:function(){this.handleOpenImage(this.title,this.link)}},{key:"_toggleLike",value:function(){this.isLiked=!this.isLiked,this.isLiked?this.likeButton.classList.add("elements__box-heart-active"):this.likeButton.classList.remove("elements__box-heart-active"),this.handleLike(this.cardId,this.isLiked)}},{key:"_setEventListeners",value:function(){var e=this;this.deleteButton.addEventListener("click",(function(){console.log("Eliminando tarjeta con ID:",e.cardId),e.handleDeleteClick(e.cardId,e.card)})),this.cardImage.addEventListener("click",(function(){e._handleOpenImageCard()})),this.likeButton.addEventListener("click",(function(){e._toggleLike()}))}},{key:"generateCard",value:function(){return this._getCardClone(),this._setEventListeners(),this.card}},{key:"handleDeleteClick",value:function(e,t,n){n.setSubmitAction((function(){api.deleteCard(e).then((function(){t.remove(),n.close()})).catch((function(e){return console.error("Error al eliminar la tarjeta:",e)}))})),n.open()}}],t&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var _=function(){return e=function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nameElement=document.querySelector(n),this.aboutElement=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{name:this.nameElement.textContent,about:this.aboutElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this.nameElement.textContent=t,this.aboutElement.textContent=n}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),E=document.querySelector("#editForm"),g=E.querySelector("#editName"),S=E.querySelector("#editAbout"),k=document.querySelector("#addSave"),w=document.querySelector(".template"),j=document.querySelector("#addForm"),P=document.querySelector("#profileImage");function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}var I=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=r,this._renderer=o,this.container=document.querySelector(n)},(t=[{key:"setItems",value:function(e){this.items=e}},{key:"renderer",value:function(){var e=this;this.items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this.container.prepend(e)}}])&&O(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function q(e){var t=function(e){if("object"!=B(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}var A=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupElement=document.querySelector(t),this.popupCloseButton=this.popupElement.querySelector(".popup__close-button")||this.popupElement.querySelector(".popup__image-close-button"),this._handleEscClose=this._handleEscClose.bind(this),this.setEventListeners()},t=[{key:"open",value:function(){this.popupElement.classList.add("popup__opened"),k.classList.add("popup__button_disabled"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this.popupElement.classList.remove("popup__opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_isClickOutside",value:function(e){return e.target.classList.contains("popup__opened")}},{key:"setEventListeners",value:function(){var e=this;this.popupCloseButton.addEventListener("click",(function(){return e.close()})),this.popupElement.querySelector(".popup__container").addEventListener("click",(function(t){t.target.matches(".popup__container")&&e.close()}))}}],t&&T(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function D(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function V(e,t,n,r){var o=z(F(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},z.apply(null,arguments)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}var G=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=F(t),function(e,t){if(t&&("object"==R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U()?Reflect.construct(t,n||[],F(e).constructor):t.apply(e,n))}(this,t,[e])).setEventListeners(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,n){V(t,"open",this,3)([]);var r=this.popupElement.querySelector(".popup__image-open"),o=this.popupElement.querySelector(".popup__title");r.src=n,r.alt=e,o.textContent=e}},{key:"close",value:function(){V(t,"close",this,3)([])}}])&&x(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(A);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function Q(e,t,n,r){var o=W(X(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function W(){return W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},W.apply(null,arguments)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}var Z=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,n){return t=X(t),function(e,t){if(t&&("object"==M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K()?Reflect.construct(t,n||[],X(e).constructor):t.apply(e,n))}(this,t,[e])).handleFormSubmit=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(t,e),n=t,r=[{key:"_getInputValues",value:function(){var e={},t=this.popupElement.querySelector("form");return Array.from(t.elements).forEach((function(t){t.name&&(e[t.name]=t.value)})),e}},{key:"setEventListeners",value:function(){var e=this;Q(t,"setEventListeners",this,3)([]),this.popupElement.querySelector("form").addEventListener("submit",(function(t){t.preventDefault(),e.handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){Q(t,"close",this,3)([]),this.popupElement.querySelector("form").reset()}}],r&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(A);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,te(r.key),r)}}function te(e){var t=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}var ne=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mainUrl=t,this._headers=n},(t=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._mainUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"getCards",value:function(){return fetch("".concat(this._mainUrl,"/cards/"),{method:"GET",headers:this._headers}).then((function(e){if(!e.ok)throw new Error("Error: ".concat(e.status));return e.json()}))}},{key:"updateProfile",value:function(e,t){return fetch("".concat(this._mainUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){if(!e.ok)throw new Error("Error al actualizar los datos: ".concat(e.status));return e.json()}))}},{key:"addCard",value:function(e,t){return fetch("".concat(this._mainUrl,"/cards/"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse).catch((function(e){throw console.error("Error al crear la carta: ".concat(e)),e}))}},{key:"toggleLikeCard",value:function(e,t){var n=t?"PUT":"DELETE";return fetch("".concat(this._mainUrl,"/cards/").concat(e,"/likes/"),{method:n,headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._mainUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse).catch((function(e){throw console.error("Error al eliminar la tarjeta: ".concat(e)),e}))}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._mainUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ie(e){var t=function(e){if("object"!=re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}function ce(){return ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ce.apply(null,arguments)}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}const se=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=ue(t),function(e,t){if(t&&("object"==re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ae()?Reflect.construct(t,n||[],ue(e).constructor):t.apply(e,n))}(this,t,[e])).submitAction=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(t,e),n=t,r=[{key:"setSubmitAction",value:function(e){this.submitAction=e}},{key:"setEventListeners",value:function(){var e,n,r,o=this;if((e=t,n=this,"function"==typeof(r=ce(ue(1&3?e.prototype:e),"setEventListeners",n))?function(e){return r.apply(n,e)}:r)([]),this.popupElement){var i=this.popupElement.querySelector(".popup__form-save-delete");i?i.addEventListener("click",(function(e){e.preventDefault(),o.submitAction&&o.submitAction()})):console.error("El botón de confirmación no se encuentra en el popup")}else console.error("El popup no se encuentra en el DOM")}}],r&&oe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(A);document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("header");e&&(e.src=t);var c=document.getElementById("profileImage");c&&(c.src=n);var u=document.getElementById("openModal");u&&(u.src=r);var l=document.getElementById("profileEditImg");l&&(l.src=o);var s=document.getElementById("addCloseButton");s&&(s.src=i);var f=document.getElementById("editCloseButton");f&&(f.src=i);var p=document.getElementById("formClose");p&&(p.src=i);var d=document.getElementById("deleteCloseButton");d&&(d.src=i);var y=document.getElementById("vectorProfile");y&&(y.src=a);var m=document.getElementById("addCloseProfilePicture");m&&(m.src=i)}));var fe=new s(E,{formSelector:".popup__form-profile",inputSelector:".popup__input-profile",submitButtonSelector:".popup__form-save-profile",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});fe.enableValidation();var pe=new s(j,{formSelector:".popup__form-add",inputSelector:".popup__input-add",submitButtonSelector:".popup__form-save-add",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});pe.enableValidation();var de=new _({nameSelector:".profile__name",aboutSelector:".profile__description"}),ye=new Z("#editProfile",(function(e){var t=document.querySelector("#editSave");console.log("Formulario enviado, iniciando actualización..."),t.textContent="Guardando...",ge.updateProfile(e.name,e.about).then((function(e){console.log("Perfil actualizado correctamente:",e),de.setUserInfo({name:e.name,about:e.about}),ye.close()})).catch((function(e){console.error("Error al actualizar el perfil:",e)})).finally((function(){console.log("Actualización completada."),t.textContent="Guardar"}))}));document.querySelector(".profile__edit").addEventListener("click",(function(){var e=de.getUserInfo();fe.resetFormValidation(),g.value=e.name,S.value=e.about,ye.open()}));var me=new se("#deleteImage");document.addEventListener("DOMContentLoaded",(function(){me.setEventListeners()}));var he=function(e){var t=Array.isArray(e.likes)&&e.likes.some((function(e){return e._id===currentUserId}));return new m(e.name,e.link,w,(function(e,t){return be.open(e,t)}),(function(e,t){return ge.toggleLikeCard(e,t).then((function(e){console.log("Like actualizado en la API: ".concat(t),e)})).catch((function(e){throw console.error("Error al actualizar el like en la API:",e),e}))}),e._id,t,(function(e,t){me.setSubmitAction((function(){ge.deleteCard(e).then((function(){t.remove(),me.close()})).catch((function(e){return console.error("Error al eliminar la tarjeta:",e)}))})),me.open()}))},ve=new Z("#addImage",(function(e){ge.addCard(e.name,e.link).then((function(e){var t=he(e);Se.addItem(t.generateCard())})).catch((function(e){return console.error("Error al agregar tarjeta:",e)}))}));document.querySelector(".profile__add").addEventListener("click",(function(){pe.resetFormValidation(),ve.open()}));var be=new G("#popup__image"),_e=document.querySelector(".popup__image-open");_e.addEventListener("click",(function(){_e.open()}));var Ee=new Z("#addProfilePicture",(function(e){var t=document.getElementById("addSave"),n=e.link;t.textContent="Guardando...",t.disabled=!0,ge.updateAvatar(n).then((function(e){document.getElementById("profileImage").src=e.avatar,Ee.close()})).catch((function(e){console.error("Error al actualizar el avatar:",e),alert("No se pudo actualizar el avatar.Asegúrate de ingresar un enlace válido!!!!!!!!!.")})).finally((function(){t.textContent="Guardar",t.disabled=!1}))}));document.querySelector(".profile__picture-container").addEventListener("click",(function(){pe.resetFormValidation(),Ee.open()}));var ge=new ne("https://around-api.es.tripleten-services.com/v1",{authorization:"bb92e92e-c72d-476e-8c84-fd7d16914439","Content-Type":"application/json"}),Se=new I({items:[],renderer:function(e){var t=he(e);Se.addItem(t.generateCard())}},".elements__container-top");Se.renderer(),ge.getUserInfo().then((function(e){de.setUserInfo({name:e.name,about:e.about}),P.src=e.avatar,P.alt="Avatar de ".concat(e.name),console.log("Nombre:",e.name),console.log("About:",e.about),console.log("Avatar:",e.avatar)})).catch((function(e){console.error("Error al cargar la información del usuario:",e)}));var ke=document.querySelector(".elements__container-top");ge.getCards().then((function(e){console.log("Tarjetas obtenidas del servidor",e),e.forEach((function(e){var t=he(e).generateCard();ke.append(t)}))})).catch((function(e){return console.error("Error al cargar las tarjetas:",e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxNQUFLLFNBQUM0SSxHQUNMM0ssUUFBUUMsSUFBSSxrQ0FBbUMwSyxHQUMvQ0EsRUFBTW5MLFNBQVEsU0FBQ21FLEdBQ2IsSUFBTWpDLEVBQWN1SCxHQUFXdEYsR0FBTW9HLGVBQ3JDVSxHQUFlRyxPQUFPbEosRUFDeEIsR0FDRixJQUNDTyxPQUFNLFNBQUNDLEdBQUcsT0FBS2xDLFFBQVFtQyxNQUFNLGdDQUFpQ0QsRUFBSSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL1V0aWwuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3J7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2V0dGluZ3Mpe1xyXG4gICAgICAgIHRoaXMuZm9ybUVsZW1lbnQ9Zm9ybUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5mb3JtU2VsZWN0b3I9c2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuaW5wdXRTZWxlY3Rvcj1zZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uU2VsZWN0b3I9c2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzPXNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVycm9yQ2xhc3M9c2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuZXJyb3JDbGFzcz1zZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uRWxlbWVudD10aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB9XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2Upe1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5lcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpe1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lcnJvckNsYXNzKTtcclxuICAgICAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCl7XHJcbiAgICAgICAgaWYoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCl7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKXtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25FbGVtZW50LmRpc2FibGVkPXRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQ9ZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXNldEZvcm1WYWxpZGF0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCk9PntcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dCk9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldnQua2V5KVxyXG4gICAgICAgICAgICAgICAgaWYoZXZ0LmtleT09PVwiRW50ZXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICAgIH0iLCJpbXBvcnQgdHJhc2hCdXR0b25JY29uIGZyb20gXCIuL2ltYWdlcy9EZWxhdGUtYnV0dG9uLnBuZ1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJke1xyXG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBsaW5rLCB0ZW1wbGF0ZSwgaGFuZGxlT3BlbkltYWdlLCBoYW5kbGVMaWtlLCBjYXJkSWQsIGlzTGlrZWQsaGFuZGxlRGVsZXRlQ2xpY2spIHtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMubGluayA9IGxpbms7XHJcbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICB0aGlzLmhhbmRsZU9wZW5JbWFnZSA9IGhhbmRsZU9wZW5JbWFnZTtcclxuICAgIHRoaXMuaGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XHJcbiAgICB0aGlzLmNhcmRJZCA9IGNhcmRJZDtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7IFxyXG4gICAgdGhpcy5oYW5kbGVEZWxldGVDbGljaz1oYW5kbGVEZWxldGVDbGljaztcclxuICB9XHJcbiAgICBfZ2V0Q2FyZENsb25lKCl7XHJcbiAgICAgICAgdGhpcy5jYXJkPXRoaXMudGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGxhY2VcIik7Ly9jbG9uYSBwcm9waWVkYWRlcyB5IHRvZG9cclxuICAgICAgICB0aGlzLl9zZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICAgICAgdGhpcy5jYXJkSW1hZ2Uuc3JjPXRoaXMubGluaztcclxuICAgICAgICB0aGlzLmNhcmRUaXRsZS50ZXh0Q29udGVudD10aGlzLnRpdGxlO1xyXG4gICAgICAgIHRoaXMuY2FyZEltYWdlLmFsdD10aGlzLnRpdGxlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcclxuICAgICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfX2JveC1oZWFydC1hY3RpdmVcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudHNfX2JveC1oZWFydC1hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmQ7XHJcbiAgICB9XHJcbiAgICBfc2V0UHJvcGVydGllcygpe1xyXG4gICAgICB0aGlzLmNhcmRJbWFnZT10aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGxhY2UtcGljdHVyZVwiKTtcclxuICAgICAgdGhpcy5jYXJkVGl0bGUgPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fYm94LW5hbWVcIik7XHJcbiAgICAgIHRoaXMubGlrZUJ1dHRvbj10aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fYm94LWhlYXJ0XCIpO1xyXG4gICAgICB0aGlzLmRlbGV0ZUJ1dHRvbj10aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGxhY2UtZGVsYXRlXCIpO1xyXG4gICAgICBpZiAodGhpcy5kZWxldGVCdXR0b24pIHtcclxuICAgICAgICB0aGlzLmRlbGV0ZUJ1dHRvbi5zcmMgPSB0cmFzaEJ1dHRvbkljb247XHJcbiAgICB9XHJcbiAgfVxyXG4gICAgX2hhbmRsZU9wZW5JbWFnZUNhcmQoKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlT3BlbkltYWdlKHRoaXMudGl0bGUsIHRoaXMubGluayk7XHJcbiAgfVxyXG4gIF90b2dnbGVMaWtlKCkge1xyXG4gICAgdGhpcy5pc0xpa2VkID0gIXRoaXMuaXNMaWtlZDsgLy9jb24gZXN0byBjYW1iaW8gZWwgZXN0YWRvIGxvY2FsbWVudGUgcHJpbWVyb1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCkge1xyXG4gICAgICB0aGlzLmxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRzX19ib3gtaGVhcnQtYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50c19fYm94LWhlYXJ0LWFjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIHRoaXMuaGFuZGxlTGlrZSh0aGlzLmNhcmRJZCwgdGhpcy5pc0xpa2VkKVxyXG4gIH1cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRWxpbWluYW5kbyB0YXJqZXRhIGNvbiBJRDpcIiwgdGhpcy5jYXJkSWQpOyBcclxuICAgICAgICAgIHRoaXMuaGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5jYXJkSWQsdGhpcy5jYXJkKVxyXG4gICAgICAgICAgLy90aGlzLl9oYW5kbGVSZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBcclxuICAgICAgICB0aGlzLmNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiAsICgpPT57XHJcbiAgICAgICAgICB0aGlzLl9oYW5kbGVPcGVuSW1hZ2VDYXJkKCk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgICAgIHRoaXMubGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVDYXJkKCl7XHJcbiAgICAgICAgdGhpcy5fZ2V0Q2FyZENsb25lKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYXJkO1xyXG4gICAgfVxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2soY2FyZElkLCBjYXJkRWxlbWVudCwgcG9wdXBEZWxldGVDb25maXJtYXRpb24pIHtcclxuICAgICAgLy8gQ29uZmlndXJhIGxhIGFjY2nDs24gcGFyYSBlbGltaW5hciBsYSB0YXJqZXRhIGVuIGVsIHBvcHVwIGRlIGNvbmZpcm1hY2nDs25cclxuICAgICAgcG9wdXBEZWxldGVDb25maXJtYXRpb24uc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpIC8vIEVsaW1pbmFyIGxhIHRhcmpldGEgZGUgbGEgQVBJXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpOyAvLyBFbGltaW5hcmxhIGRlbCBET01cclxuICAgICAgICAgICAgcG9wdXBEZWxldGVDb25maXJtYXRpb24uY2xvc2UoKTsgLy8gQ2llcnJhIGVsIHBvcHVwXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBlbGltaW5hciBsYSB0YXJqZXRhOlwiLCBlcnIpKTsgLy8gTWFuZWpvIGRlIGVycm9yZXNcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIEFicmUgZWwgcG9wdXAgZGUgY29uZmlybWFjacOzblxyXG4gICAgICBwb3B1cERlbGV0ZUNvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgLy8gU2VsZWNjaW9uYW1vcyBsb3MgZWxlbWVudG9zIGNvbiBsb3Mgc2VsZWN0b3JlcyBwYXNhZG9zIGVuIGVsIG9iamV0byBkZWwgY29uc3RydWN0b3JcclxuICAgICAgICB0aGlzLm5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuYWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIC8vIE3DqXRvZG8gcGFyYSBvYnRlbmVyIGxhIGluZm9ybWFjacOzbiBkZWwgdXN1YXJpbyBkZXNkZSBlbCBET01cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGFib3V0OiB0aGlzLmFib3V0RWxlbWVudC50ZXh0Q29udGVudFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvLyBNw6l0b2RvIHBhcmEgZXN0YWJsZWNlciBsYSBudWV2YSBpbmZvcm1hY2nDs24gZGVsIHVzdWFyaW8gZW4gZWwgRE9NXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgICAgICB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLmFib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRGb3JtXCIpOyAvL2xvcyBlZGl0IHNvbiBwYXJhIG5vbWJyZSB5IGFjZXJjYSBkZS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dD1mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXROYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgYWJvdXRJbnB1dD1mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRBYm91dFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFNhdmVCdXR0b249ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRTYXZlXCIpO1xyXG5leHBvcnQgY29uc3QgdGVtcGxhdGVDYXJkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVtcGxhdGVcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRGb3JtRWxlbWVudD0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRGb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhcj0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlSW1hZ2VcIik7XHJcblxyXG5leHBvcnR7fVxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbntcclxuICAgIGNvbnN0cnVjdG9yKHtpdGVtcyxyZW5kZXJlcn0sIHNlbGVjdG9yKXsgLy9cclxuICAgICAgICB0aGlzLml0ZW1zPWl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyPXJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgc2V0SXRlbXMoaXRlbXMpIHtcclxuICAgICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcbiAgICAgIH1cclxuICAgIHJlbmRlcmVyKCl7XHJcbiAgICAgICAgLy9yZW5kZXJpemEgY29uIHVuIGl0ZW0gZXNwZWNpYWxcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgIH1cclxuICAgIC8vZWwgaXRlbSBlcyBsYSBjYXJ0YSB5IGVsIHJlbmRlcmVyIGxhIGZ1bmNpb24gZGUgYcOxYWRpciBsYSBjYXJ0YVxyXG4gICAgYWRkSXRlbShlbGVtZW50KXtcclxudGhpcy5jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHthZGRTYXZlQnV0dG9ufSBmcm9tIFwiLi9VdGlsLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwe1xyXG4gICAgY29uc3RydWN0b3IgKHBvcHVwU2VsZWN0b3Ipe1xyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKXx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1jbG9zZS1idXR0b24nKTsgLy9ib3RvbiBkZSBjZXJyYXIgICAgICAgXHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2U9dGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgICBvcGVuKCl7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgICAgYWRkU2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiKVxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCl7XHJcbiAgICAgICAgaWYoZXZ0LmtleT09PSAnRXNjYXBlJyl7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIF9pc0NsaWNrT3V0c2lkZShldnQpe1xyXG4gICAgICAgIHJldHVybiBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19vcGVuZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICAvL0V2ZW50b3MgZGUgdG9kb1xyXG4gICAgICAgIHRoaXMucG9wdXBDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwiLnBvcHVwX19jb250YWluZXJcIikpe1xyXG4gICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbi8vIHNvbG8gcXVlIGFicmFuIGxhcyBpbWFnZW5lc1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwe1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vYXF1aSBkZWNpbW9zIHF1ZSBlcyBsYSBkZWwgcGFkcmUgXHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG4gICAgb3Blbih0aXRsZSwgbGluayl7XHJcbiAgICBzdXBlci5vcGVuKCk7IC8vdmFtb3MgYSBtb2RpZmljYXIgbGEgZGVsIHBhZHJlXHJcbiAgICAgICAgY29uc3QgcG9wdXBPcGVuZWRJbWFnZSA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2Utb3BlbicpO1xyXG4gICAgICAgIGNvbnN0IHBvcHVwVGl0bGUgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlJyk7XHJcbiAgICAgICAgcG9wdXBPcGVuZWRJbWFnZS5zcmM9bGluaztcclxuICAgICAgICBwb3B1cE9wZW5lZEltYWdlLmFsdD10aXRsZTtcclxuICAgICAgICBwb3B1cFRpdGxlLnRleHRDb250ZW50PXRpdGxlOyAgIFxyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTsgXHJcbiAgICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cHtcclxuICAgIGNvbnN0cnVjdG9yIChwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0ICl7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vbGxhbWEgYWwgY29uc3RydWN0b3IgcGFkcmUgeSBsZSBtYW5kYSBlbCBzZWxlY3RvciwgZWwgcGFkcmUgZXN0YSBlbiBwb3AgdXBcclxuICAgICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQ9aGFuZGxlRm9ybVN1Ym1pdDsgLy9sYSBndWFyZG8gICAgICAgIFxyXG4gICAgfVxyXG4gICAgLy9BcXVpIHZveSBhIHJlY29nZXIgdmFsb3JlcyB5IGd1YXJkYXJsb3MgZW4gdW4gb2JqZXRvIFxyXG4gICAgX2dldElucHV0VmFsdWVzKCl7IFxyXG4gICAgICAgIGNvbnN0IGZvcm1WYWx1ZXM9e307XHJcbiAgICAgICAgY29uc3QgZm9ybUVsZW1lbnQ9dGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XHJcbiAgICAgICAgQXJyYXkuZnJvbShmb3JtRWxlbWVudC5lbGVtZW50cykuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2coaW5wdXQpXHJcbiAgICAgICAgICAgIGlmKGlucHV0Lm5hbWUpe1xyXG4gICAgICAgICAgICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXT1pbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgLy9jb25zb2xlLmxvZyhmb3JtVmFsdWVzKTtcclxuICAgICAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICAgIH1cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy9zdXBlciBzb2xvIHBhcmEgbWV0b2RvcyB5IHNlIHZhIGFsIGRlbCBwYWRyZVxyXG4gICAgICAgIGNvbnN0IGZvcm1FbGVtZW50PXRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG4gICAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCk9PnsgLy90aGlzLnBvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KT0+e1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpIFxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7ICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICBjb25zdCBmb3JtRWxlbWVudD10aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcclxuICAgICAgICBmb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3RvcihtYWluVXJsLCBoZWFkZXJzKSB7XHJcbiAgICAgIHRoaXMuX21haW5VcmwgPSBtYWluVXJsO1xyXG4gICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuICBcclxuICAgIC8vIFZlcmlmaWNhciBsYSByZXNwdWVzdGEgZGVsIHNlcnZpZG9yXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICBcclxuICAgIC8vIEluZm9ybWFjacOzbiBkZWwgdXN1YXJpb1xyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9tYWluVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIC8vb2J0ZW5lciBsYXMgY2FydGFzXHJcbiAgICBnZXRDYXJkcygpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX21haW5Vcmx9L2NhcmRzL2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2ZpbGUobmFtZSxhYm91dCl7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9tYWluVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgICB9KSxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGFsIGFjdHVhbGl6YXIgbG9zIGRhdG9zOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGFkZENhcmQobmFtZSwgbGluaykge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbWFpblVybH0vY2FyZHMvYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsIFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbmFtZTogbmFtZSwgXHJcbiAgICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnRhOiAke2Vycn1gKTtcclxuICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHRvZ2dsZUxpa2VDYXJkKGNhcmRJZCwgaXNMaWtlZCkge1xyXG4gICAgICBjb25zdCBtZXRob2QgPSBpc0xpa2VkID8gJ1BVVCcgOiAnREVMRVRFJzsgLy8gUFVUIHNpIGVzIHVuIFwibGlrZVwiLCBERUxFVEUgc2kgZXMgdW4gXCJ1bmxpa2VcIlxyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbWFpblVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzL2AsIHtcclxuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX21haW5Vcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsIC8vIFVzYW1vcyBERUxFVEUgcGFyYSBlbGltaW5hciBsYSB0YXJqZXRhXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBlbGltaW5hciBsYSB0YXJqZXRhOiAke2Vycn1gKTtcclxuICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUF2YXRhcihhdmF0YXJVcmwpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX21haW5Vcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBhdmF0YXJVcmwgfSksXHJcbiAgICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuc3VibWl0QWN0aW9uID0gbnVsbDsgLy8gQWNjacOzbiBwZXJzb25hbGl6YWRhIHF1ZSBzZSBlamVjdXRhIGFsIGNvbmZpcm1hclxyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5zdWJtaXRBY3Rpb24gPSBhY3Rpb247IC8vIFBlcm1pdGUgY29uZmlndXJhciBsYSBhY2Npw7NuIGEgZWplY3V0YXJcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gTGxhbWEgYSBsb3MgZXZlbnRvcyBiYXNlIGRlIGxhIGNsYXNlIFBvcHVwXHJcbiAgICBpZiAoIXRoaXMucG9wdXBFbGVtZW50KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbCBwb3B1cCBubyBzZSBlbmN1ZW50cmEgZW4gZWwgRE9NXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLXNhdmUtZGVsZXRlJyk7XHJcbiAgICBpZiAoZGVsZXRlQnV0dG9uKSB7XHJcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc3VibWl0QWN0aW9uKSB7XHJcbiAgICAgICAgICB0aGlzLnN1Ym1pdEFjdGlvbigpOyAvLyBFamVjdXRhIGxhIGFjY2nDs24gY29uZmlndXJhZGFcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVsIGJvdMOzbiBkZSBjb25maXJtYWNpw7NuIG5vIHNlIGVuY3VlbnRyYSBlbiBlbCBwb3B1cFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aENvbmZpcm1hdGlvbjsiLCJpbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIlxyXG5pbXBvcnQgaGVhZGVyIGZyb20gXCIuL2ltYWdlcy9IZWFkZXIucG5nXCIgO1xyXG5pbXBvcnQgcHJvZmlsZVBpY3R1cmUgZnJvbSBcIi4vaW1hZ2VzL1Byb2ZpbGUuanBnXCI7XHJcbmltcG9ydCBwcm9maWxlRWRpdCBmcm9tIFwiLi9pbWFnZXMvRWRpdF9idXR0b24ucG5nXCI7XHJcbmltcG9ydCBwcm9maWxlQWRkIGZyb20gXCIuL2ltYWdlcy9BZGQucG5nXCI7XHJcbmltcG9ydCBlZGl0Q2xvc2UgZnJvbSBcIi4vaW1hZ2VzL0Nsb3NlLUljb24ucG5nXCI7XHJcbmltcG9ydCBjbG9zZUZvcm0gZnJvbSBcIi4vaW1hZ2VzL0Nsb3NlLUljb24ucG5nXCI7XHJcbmltcG9ydCBjbG9zZURlbGV0ZSBmcm9tIFwiLi9pbWFnZXMvQ2xvc2UtSWNvbi5wbmdcIjtcclxuaW1wb3J0IGFkZENsb3NlQnV0dG9uSW1nIGZyb20gXCIuL2ltYWdlcy9DbG9zZS1JY29uLnBuZ1wiO1xyXG5pbXBvcnQgYWRkQ2xvc2VCdXR0b25QaWN0dXJlIGZyb20gXCIuL2ltYWdlcy9DbG9zZS1JY29uLnBuZ1wiO1xyXG5pbXBvcnQgdmVjdG9ySW1nIGZyb20gXCIuL2ltYWdlcy92ZWN0b3IucG5nXCI7XHJcbmltcG9ydCAgRm9ybVZhbGlkYXRvciAgZnJvbSBcIi4vRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQge3RlbXBsYXRlQ2FyZCwgYWRkRm9ybUVsZW1lbnQsZm9ybUVsZW1lbnQsbmFtZUlucHV0LGFib3V0SW5wdXQscHJvZmlsZUF2YXRhcn0gZnJvbSBcIi4vVXRpbC5qc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4vU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgIFBvcHVwV2l0aEltYWdlICBmcm9tIFwiLi9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3QgaGVhZGVySW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJcIik7XHJcbiAgaWYgKGhlYWRlckltZykgaGVhZGVySW1nLnNyYyA9IGhlYWRlcjtcclxuXHJcbiAgY29uc3QgcHJvZmlsZVBpY3R1cmVJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVJbWFnZVwiKTtcclxuICBpZiAocHJvZmlsZVBpY3R1cmVJbWcpIHByb2ZpbGVQaWN0dXJlSW1nLnNyYyA9IHByb2ZpbGVQaWN0dXJlO1xyXG5cclxuICBjb25zdCBwcm9maWxlRWRpdEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3Blbk1vZGFsXCIpO1xyXG4gIGlmIChwcm9maWxlRWRpdEltZykgcHJvZmlsZUVkaXRJbWcuc3JjID0gcHJvZmlsZUVkaXQ7XHJcblxyXG4gIGNvbnN0IHByb2ZpbGVBZGRJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVFZGl0SW1nXCIpO1xyXG4gIGlmIChwcm9maWxlQWRkSW1nKSBwcm9maWxlQWRkSW1nLnNyYyA9IHByb2ZpbGVBZGQ7XHJcbiAgY29uc3QgYWRkQ2xvc2VCdXR0b25JbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkQ2xvc2VCdXR0b25cIik7XHJcbiAgaWYgKGFkZENsb3NlQnV0dG9uSW1hZ2UpIGFkZENsb3NlQnV0dG9uSW1hZ2Uuc3JjID0gYWRkQ2xvc2VCdXR0b25JbWc7XHJcblxyXG4gIGNvbnN0IHByb2ZpbGVFZGl0Q2xvc2VJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRDbG9zZUJ1dHRvblwiKTtcclxuICBpZiAocHJvZmlsZUVkaXRDbG9zZUltZykgcHJvZmlsZUVkaXRDbG9zZUltZy5zcmMgPSBlZGl0Q2xvc2U7XHJcblxyXG4gIGNvbnN0IGNsb3NlRm9ybUltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9ybUNsb3NlXCIpO1xyXG4gIGlmIChjbG9zZUZvcm1JbWcpIGNsb3NlRm9ybUltZy5zcmMgPSBjbG9zZUZvcm07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUltYWdlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGVDbG9zZUJ1dHRvblwiKTtcclxuICBpZiAoZGVsZXRlSW1hZ2VCdXR0b24pIGRlbGV0ZUltYWdlQnV0dG9uLnNyYyA9IGNsb3NlRGVsZXRlO1xyXG5cclxuICBjb25zdCB2ZWN0b3JJbWFnZUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZlY3RvclByb2ZpbGVcIik7XHJcbiAgaWYgKHZlY3RvckltYWdlSWNvbikgdmVjdG9ySW1hZ2VJY29uLnNyYyA9IHZlY3RvckltZztcclxuXHJcbiAgY29uc3QgY2xvc2VQcm9maWxlUGljdHVyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkQ2xvc2VQcm9maWxlUGljdHVyZVwiKTtcclxuICBpZiAoY2xvc2VQcm9maWxlUGljdHVyZSkgY2xvc2VQcm9maWxlUGljdHVyZS5zcmMgPSBhZGRDbG9zZUJ1dHRvblBpY3R1cmU7XHJcbn0pO1xyXG5cclxuLy9sbyBkZSBhcXVpIGVzIHBhcmEgbGEgdmFsaWRhY2lvblxyXG5jb25zdCBzZXR0aW5ncz17XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1wcm9maWxlXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXQtcHJvZmlsZVwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLXNhdmUtcHJvZmlsZVwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxyXG59XHJcbmNvbnN0IHNldHRpbmdzQWRkPXtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWFkZFwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0LWFkZFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLXNhdmUtYWRkXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiXHJcbn1cclxuXHJcbi8vQXF1aSB2YSBsbyBkZSBsYSB2YWxpZGFjaW9uLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCB2YWxpZGF0ZVByb2ZpbGVGb3JtPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudCwgc2V0dGluZ3MpO1xyXG52YWxpZGF0ZVByb2ZpbGVGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgdmFsaWRhdGVBZGRGb3JtPSBuZXcgRm9ybVZhbGlkYXRvcihhZGRGb3JtRWxlbWVudCwgc2V0dGluZ3NBZGQpO1xyXG52YWxpZGF0ZUFkZEZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vL0luc3RhbmNpYW1vcyB1c2VyaW5mb1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gIGFib3V0U2VsZWN0b3I6ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nXHJcbn0pO1xyXG4gLy9BcXVpIGVzIHBhcmEgZWRpdGFyIHBlcmZpbC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIFxyXG4gY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjZWRpdFByb2ZpbGUnLCAodmFsdWVzKSA9PiB7XHJcbiAgY29uc3Qgc2F2ZUJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRTYXZlXCIpO1xyXG4gIFxyXG4gIGNvbnNvbGUubG9nKFwiRm9ybXVsYXJpbyBlbnZpYWRvLCBpbmljaWFuZG8gYWN0dWFsaXphY2nDs24uLi5cIik7XHJcbiAgc2F2ZUJ1dHRvbkVkaXQudGV4dENvbnRlbnQgPSBcIkd1YXJkYW5kby4uLlwiOyAvLyBDYW1iaWFyIHRleHRvXHJcbiAgXHJcbiAgYXBpLnVwZGF0ZVByb2ZpbGUodmFsdWVzLm5hbWUsIHZhbHVlcy5hYm91dClcclxuICAgIC50aGVuKCh1cGRhdGVEYXRhKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiUGVyZmlsIGFjdHVhbGl6YWRvIGNvcnJlY3RhbWVudGU6XCIsIHVwZGF0ZURhdGEpO1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgbmFtZTogdXBkYXRlRGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiB1cGRhdGVEYXRhLmFib3V0XHJcbiAgICAgIH0pO1xyXG4gICAgICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlKCk7IC8vIENpZXJyYSBlbCBwb3B1cFxyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIHBlcmZpbDpcIiwgZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiQWN0dWFsaXphY2nDs24gY29tcGxldGFkYS5cIik7XHJcbiAgICAgIHNhdmVCdXR0b25FZGl0LnRleHRDb250ZW50ID0gXCJHdWFyZGFyXCI7IC8vIFJlc3RhdXJhciB0ZXh0b1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3Qgb3Blbk1vZGFsQnV0dG9uUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcclxub3Blbk1vZGFsQnV0dG9uUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyBcclxuICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHZhbGlkYXRlUHJvZmlsZUZvcm0ucmVzZXRGb3JtVmFsaWRhdGlvbigpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5uYW1lO1xyXG4gIGFib3V0SW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uYWJvdXQ7XHJcbiAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XHJcbn0pO1xyXG4vL0FxdWkgZXMgcGFyYSBlbCBwb3B1cCBkZSBhZ3JlZ2FyIHRhcmpldGEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgcG9wdXBEZWxldGVDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcjZGVsZXRlSW1hZ2UnKTtcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuICBwb3B1cERlbGV0ZUNvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG59KTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IGlzTGlrZWQgPSBBcnJheS5pc0FycmF5KGl0ZW0ubGlrZXMpICYmIGl0ZW0ubGlrZXMuc29tZSgodXNlcikgPT4gdXNlci5faWQgPT09IGN1cnJlbnRVc2VySWQpOyAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBhY3R1YWwgdGllbmUgdW4gbGlrZSBlbiBsYSB0YXJqZXRhXHJcblxyXG4gIHJldHVybiBuZXcgQ2FyZChcclxuICAgIGl0ZW0ubmFtZSxcclxuICAgIGl0ZW0ubGluayxcclxuICAgIHRlbXBsYXRlQ2FyZCxcclxuICAgICh0aXRsZSwgbGluaykgPT4gcG9wdXBXaXRoSW1hZ2Uub3Blbih0aXRsZSwgbGluayksIC8vIEFicmUgZWwgcG9wdXAgZGUgaW1hZ2VuXHJcbiAgICAoY2FyZElkLCBpc0xpa2VkKSA9PiB7XHJcbiAgICAgIC8vIExsYW1hciBhIGxhIEFQSSBwYXJhIGFjdHVhbGl6YXIgZWwgXCJsaWtlXCJcclxuICAgICAgcmV0dXJuIGFwaS50b2dnbGVMaWtlQ2FyZChjYXJkSWQsIGlzTGlrZWQpXHJcbiAgICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTGlrZSBhY3R1YWxpemFkbyBlbiBsYSBBUEk6ICR7aXNMaWtlZH1gLCB1cGRhdGVkQ2FyZCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgbGlrZSBlbiBsYSBBUEk6XCIsIGVycik7XHJcbiAgICAgICAgICB0aHJvdyBlcnI7IC8vIExhbnphciBlbCBlcnJvciBwYXJhIHF1ZSBfdG9nZ2xlTGlrZSBsbyBtYW5lamVcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBpdGVtLl9pZCxcclxuICAgIGlzTGlrZWQsIC8vIEVzdGFkbyBpbmljaWFsIGRlbCBsaWtlXHJcbiAgICAoY2FyZElkLCBjYXJkRWxlbWVudCkgPT4ge1xyXG4gICAgICAvLyBDb25maWd1cmFjacOzbiBkZWwgcG9wdXAgZGUgZWxpbWluYWNpw7NuXHJcbiAgICAgIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgcG9wdXBEZWxldGVDb25maXJtYXRpb24uY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGVsaW1pbmFyIGxhIHRhcmpldGE6XCIsIGVycikpO1xyXG4gICAgICB9KTtcclxuICAgICAgcG9wdXBEZWxldGVDb25maXJtYXRpb24ub3BlbigpO1xyXG4gICAgfVxyXG4gICk7XHJcbn07XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCBwb3B1cENhcmRzID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNhZGRJbWFnZScsICh2YWx1ZXMpID0+IHtcclxuICBhcGkuYWRkQ2FyZCh2YWx1ZXMubmFtZSwgdmFsdWVzLmxpbmspXHJcbiAgICAudGhlbigobnVldmFDYXJkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKG51ZXZhQ2FyZCk7XHJcbiAgICAgIHNlY3Rpb25DYXJkcy5hZGRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWdyZWdhciB0YXJqZXRhOlwiLCBlcnIpKTtcclxufSk7XHJcblxyXG5jb25zdCBvcGVuTW9kYWxCdXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZFwiKTtcclxub3Blbk1vZGFsQnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgdmFsaWRhdGVBZGRGb3JtLnJlc2V0Rm9ybVZhbGlkYXRpb24oKTtcclxuICBwb3B1cENhcmRzLm9wZW4oKTtcclxufSk7XHJcbi8vQXF1aSB2YSBsYSBkZSBhYnJpciBpbWFnZW4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcjcG9wdXBfX2ltYWdlJyk7IFxyXG5jb25zdCBvcGVuSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1vcGVuXCIpO1xyXG5vcGVuSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuSW1hZ2Uub3BlbigpO1xyXG59KTtcclxuLy9BcXVpIHZhIGxvIGRlIGxhIGltYWdlbiBkZWwgcGVyZmlsLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgYXZhdGFyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjYWRkUHJvZmlsZVBpY3R1cmUnLCAoZm9ybURhdGEpID0+IHtcclxuICBjb25zdCBzYXZlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRTYXZlXCIpOyAvLyBCb3TDs24gZGUgZ3VhcmRhclxyXG4gIGNvbnN0IGF2YXRhclVybCA9IGZvcm1EYXRhLmxpbms7IFxyXG5cclxuICAvLyBDYW1iaWFyIGVsIHRleHRvIGRlbCBib3TDs24gYSBcIkd1YXJkYW5kby4uLlwiXHJcbiAgc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhbmRvLi4uXCI7XHJcbiAgc2F2ZUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gIGFwaS51cGRhdGVBdmF0YXIoYXZhdGFyVXJsKVxyXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgIC8vIEFjdHVhbGl6YSBlbCBhdmF0YXIgZW4gZWwgRE9NXHJcbiAgICAgIGNvbnN0IHByb2ZpbGVQaWN0dXJlSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlSW1hZ2VcIik7XHJcbiAgICAgIHByb2ZpbGVQaWN0dXJlSW1nLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuXHJcbiAgICAgIGF2YXRhckZvcm0uY2xvc2UoKTsgLy8gQ2llcnJhIGVsIG1vZGFsIHNpIGxhIGFjdHVhbGl6YWNpw7NuIGZ1ZSBleGl0b3NhXHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgYXZhdGFyOlwiLCBlcnIpO1xyXG4gICAgICBhbGVydChcIk5vIHNlIHB1ZG8gYWN0dWFsaXphciBlbCBhdmF0YXIuQXNlZ8O6cmF0ZSBkZSBpbmdyZXNhciB1biBlbmxhY2UgdsOhbGlkbyEhISEhISEhIS5cIik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAvLyBSZXN0YXVyYSBlbCB0ZXh0byBkZWwgYm90w7NuIGEgXCJHdWFyZGFyXCIgeSBoYWJpbMOtdGFsb1xyXG4gICAgICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFyXCI7XHJcbiAgICAgIHNhdmVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0pO1xyXG59KTtcclxuY29uc3Qgb3Blbk1vZGFsUGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGljdHVyZS1jb250YWluZXJcIik7XHJcbm9wZW5Nb2RhbFBpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB2YWxpZGF0ZUFkZEZvcm0ucmVzZXRGb3JtVmFsaWRhdGlvbigpOyAvLyBSZXNldGVhIHZhbGlkYWNpb25lcywgc2kgZXMgbmVjZXNhcmlvXHJcbiAgYXZhdGFyRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG4vL2xsYW1hbW9zIGEgbGEgYXBpXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoXCJodHRwczovL2Fyb3VuZC1hcGkuZXMudHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLCB7XHJcbiAgYXV0aG9yaXphdGlvbjogXCJiYjkyZTkyZS1jNzJkLTQ3NmUtOGM4NC1mZDdkMTY5MTQ0MzlcIixcclxuICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxufSk7XHJcblxyXG4vLyBJbnN0YW5jaWFtb3MgbGEgY2xhc2UgU2VjdGlvbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IHNlY3Rpb25DYXJkcyA9IG5ldyBTZWN0aW9uKHtcclxuICBpdGVtczogW10sIC8vaW5pY2lhbG1lbnRlIGVzIHVuIGFycmF5IHZhY8Otb1xyXG4gIHJlbmRlcmVyOiBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtKTsgLy8gVXNhIGxhIGZ1bmNpw7NuIGNlbnRyYWxpemFkYVxyXG4gICAgc2VjdGlvbkNhcmRzLmFkZEl0ZW0oY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XHJcbiAgfVxyXG59LCBcIi5lbGVtZW50c19fY29udGFpbmVyLXRvcFwiKTtcclxuc2VjdGlvbkNhcmRzLnJlbmRlcmVyKCk7XHJcbi8vQXBpLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuYXBpLmdldFVzZXJJbmZvKClcclxuICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgLy8gQXNpZ25hciBsb3MgZGF0b3MgYSBsb3MgZWxlbWVudG9zIGRlbCBET01cclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICBhYm91dDogZGF0YS5hYm91dCxcclxuICAgIH0pO1xyXG4gICAgLy8gQWN0dWFsaXphciBsYSBpbWFnZW4gZGVsIHBlcmZpbFxyXG4gICAgcHJvZmlsZUF2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcclxuICAgIHByb2ZpbGVBdmF0YXIuYWx0ID0gYEF2YXRhciBkZSAke2RhdGEubmFtZX1gO1xyXG4gICAgY29uc29sZS5sb2coXCJOb21icmU6XCIsIGRhdGEubmFtZSk7IFxyXG4gICAgY29uc29sZS5sb2coXCJBYm91dDpcIiwgZGF0YS5hYm91dCk7IFxyXG4gICAgY29uc29sZS5sb2coXCJBdmF0YXI6XCIsIGRhdGEuYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FyZ2FyIGxhIGluZm9ybWFjacOzbiBkZWwgdXN1YXJpbzpcIiwgZXJyKTtcclxuICB9KTtcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2NvbnRhaW5lci10b3AnKTtcclxuIGFwaS5nZXRDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlRhcmpldGFzIG9idGVuaWRhcyBkZWwgc2Vydmlkb3JcIiwgY2FyZHMpO1xyXG4gICAgY2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSkuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgIGNhcmRzQ29udGFpbmVyLmFwcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FyZ2FyIGxhcyB0YXJqZXRhczpcIiwgZXJyKSk7XHJcbiAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIFxyXG4gIFxyXG5cclxuIFxyXG4gIFxyXG5cclxuIFxyXG5cclxuXHJcbiAgXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJzZXR0aW5ncyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImJ1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImtleSIsInZhbHVlIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfdGhpcyIsImZvckVhY2giLCJlbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfdGhpczIiLCJyZXNldCIsImV2dCIsImNvbnNvbGUiLCJsb2ciLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwidGl0bGUiLCJsaW5rIiwidGVtcGxhdGUiLCJoYW5kbGVPcGVuSW1hZ2UiLCJoYW5kbGVMaWtlIiwiY2FyZElkIiwiaXNMaWtlZCIsImhhbmRsZURlbGV0ZUNsaWNrIiwiY2FyZCIsImNsb25lTm9kZSIsImNvbnRlbnQiLCJfc2V0UHJvcGVydGllcyIsImNhcmRJbWFnZSIsInNyYyIsImNhcmRUaXRsZSIsImFsdCIsImxpa2VCdXR0b24iLCJkZWxldGVCdXR0b24iLCJ0cmFzaEJ1dHRvbkljb24iLCJfaGFuZGxlT3BlbkltYWdlQ2FyZCIsIl90b2dnbGVMaWtlIiwiX2dldENhcmRDbG9uZSIsImNhcmRFbGVtZW50IiwicG9wdXBEZWxldGVDb25maXJtYXRpb24iLCJzZXRTdWJtaXRBY3Rpb24iLCJhcGkiLCJkZWxldGVDYXJkIiwidGhlbiIsImNsb3NlIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsIm9wZW4iLCJVc2VySW5mbyIsIl9yZWYiLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwibmFtZUVsZW1lbnQiLCJkb2N1bWVudCIsImFib3V0RWxlbWVudCIsIm5hbWUiLCJhYm91dCIsIl9yZWYyIiwibmFtZUlucHV0IiwiYWJvdXRJbnB1dCIsImFkZFNhdmVCdXR0b24iLCJ0ZW1wbGF0ZUNhcmQiLCJhZGRGb3JtRWxlbWVudCIsInByb2ZpbGVBdmF0YXIiLCJTZWN0aW9uIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiY29udGFpbmVyIiwiaXRlbSIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJwb3B1cEVsZW1lbnQiLCJwb3B1cENsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJlIiwibWF0Y2hlcyIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2NhbGxTdXBlciIsIl9pbmhlcml0cyIsIl9zdXBlclByb3BHZXQiLCJwb3B1cE9wZW5lZEltYWdlIiwicG9wdXBUaXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiZm9ybVZhbHVlcyIsImVsZW1lbnRzIiwiaW5wdXQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIkFwaSIsIm1haW5VcmwiLCJoZWFkZXJzIiwiX21haW5VcmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsIl9jaGVja1Jlc3BvbnNlIiwiRXJyb3IiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhclVybCIsImF2YXRhciIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsInN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsImV2ZW50IiwiaGVhZGVySW1nIiwiZ2V0RWxlbWVudEJ5SWQiLCJoZWFkZXIiLCJwcm9maWxlUGljdHVyZUltZyIsInByb2ZpbGVQaWN0dXJlIiwicHJvZmlsZUVkaXRJbWciLCJwcm9maWxlRWRpdCIsInByb2ZpbGVBZGRJbWciLCJwcm9maWxlQWRkIiwiYWRkQ2xvc2VCdXR0b25JbWFnZSIsImFkZENsb3NlQnV0dG9uSW1nIiwicHJvZmlsZUVkaXRDbG9zZUltZyIsImVkaXRDbG9zZSIsImNsb3NlRm9ybUltZyIsImNsb3NlRm9ybSIsImRlbGV0ZUltYWdlQnV0dG9uIiwiY2xvc2VEZWxldGUiLCJ2ZWN0b3JJbWFnZUljb24iLCJ2ZWN0b3JJbWciLCJjbG9zZVByb2ZpbGVQaWN0dXJlIiwiYWRkQ2xvc2VCdXR0b25QaWN0dXJlIiwidmFsaWRhdGVQcm9maWxlRm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJ2YWxpZGF0ZUFkZEZvcm0iLCJ1c2VySW5mbyIsInBvcHVwRWRpdFByb2ZpbGUiLCJ2YWx1ZXMiLCJzYXZlQnV0dG9uRWRpdCIsInVwZGF0ZVByb2ZpbGUiLCJ1cGRhdGVEYXRhIiwic2V0VXNlckluZm8iLCJmaW5hbGx5IiwiY3VycmVudFVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJyZXNldEZvcm1WYWxpZGF0aW9uIiwiY3JlYXRlQ2FyZCIsImlzQXJyYXkiLCJsaWtlcyIsInVzZXIiLCJfaWQiLCJjdXJyZW50VXNlcklkIiwicG9wdXBXaXRoSW1hZ2UiLCJ0b2dnbGVMaWtlQ2FyZCIsInVwZGF0ZWRDYXJkIiwicG9wdXBDYXJkcyIsImFkZENhcmQiLCJudWV2YUNhcmQiLCJzZWN0aW9uQ2FyZHMiLCJhZGRJdGVtIiwiZ2VuZXJhdGVDYXJkIiwib3BlbkltYWdlIiwiYXZhdGFyRm9ybSIsImZvcm1EYXRhIiwic2F2ZUJ1dHRvbiIsInVwZGF0ZUF2YXRhciIsInVzZXJEYXRhIiwiYWxlcnQiLCJhdXRob3JpemF0aW9uIiwiZGF0YSIsImNhcmRzQ29udGFpbmVyIiwiZ2V0Q2FyZHMiLCJjYXJkcyIsImFwcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=